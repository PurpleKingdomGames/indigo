<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></title>
  
  
  <meta name="description" content="website2"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  <link rel="icon" sizes="64x64" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/laika-helium.js"></script>
    <script src="../../01-quickstart/hello-indigo.md.js"></script>
    <script src="../../01-quickstart/mdoc.js"></script>
    <script src="../../03-gameloop/frame-context.md.js"></script>
    <script src="../../03-gameloop/mdoc.js"></script>
    <script src="../../03-gameloop/outcome.md.js"></script>
    <script src="../../06-presentation/materials.md.js"></script>
    <script src="../../06-presentation/cameras.md.js"></script>
    <script src="../../06-presentation/lighting.md.js"></script>
    <script src="../../06-presentation/depth.md.js"></script>
    <script src="../../06-presentation/clones-and-mutants.md.js"></script>
    <script src="../../06-presentation/animation.md.js"></script>
    <script src="../../06-presentation/layers.md.js"></script>
    <script src="../../06-presentation/audio.md.js"></script>
    <script src="../../06-presentation/scene-update-fragment.md.js"></script>
    <script src="../../06-presentation/boundaries.md.js"></script>
    <script src="../../06-presentation/shapes.md.js"></script>
    <script src="../../06-presentation/text-and-fonts.md.js"></script>
    <script src="../../06-presentation/mdoc.js"></script>
    <script src="../../08-time/signals.md.js"></script>
    <script src="../../08-time/mdoc.js"></script>
    <script src="../../08-time/time-varying-values.md.js"></script>
    <script src="../../07-shaders/blending.md.js"></script>
    <script src="../../07-shaders/mdoc.js"></script>
    <script src="../../07-shaders/shaders-overview.md.js"></script>
    <script src="../../09-uicomponents/button.md.js"></script>
    <script src="../../09-uicomponents/input-field.md.js"></script>
    <script src="../../09-uicomponents/hit-area.md.js"></script>
    <script src="../../09-uicomponents/radio-button.md.js"></script>
    <script src="../../09-uicomponents/mdoc.js"></script>
    <script src="../../04-organisation/scene-management.md.js"></script>
    <script src="../../04-organisation/boot-and-start-up.md.js"></script>
    <script src="../../04-organisation/subsystems.md.js"></script>
    <script src="../../04-organisation/mdoc.js"></script>
    <script src="../mdoc.js"></script>
    <script src="../howto-fire-shader.md.js"></script>
    <script src="../howto-custom-entity.md.js"></script>
    <script src="../../05-platform/assets.md.js"></script>
    <script src="../../05-platform/logging.md.js"></script>
    <script src="../../05-platform/mdoc.js"></script>
    <script src="../../05-platform/input-handling.md.js"></script>
    <script src="../../10-information/key-concepts.md.js"></script>
    <script src="../../10-information/antipatterns.md.js"></script>
    <script src="../../10-information/mdoc.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../"><img src="../../img/indigo_logo_solid_text.svg" alt="Homepage" title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../table-of-content/">Contents</a></li>
    <li class="level1 nav-header">Setup &amp; Configuration</li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/examples/">Examples</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/hello-indigo/">Hello, Indigo!</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/project-templates/">Mill &amp; SBT Templates</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/quickstart/">Quick start</a></li>
    <li class="level1 nav-header">Guides</li>
    <li class="level2 nav-leaf"><a href="../howto-custom-entity/">How to make a custom entity</a></li>
    <li class="level2 nav-leaf"><a href="../howto-fire-shader/">How to write a fire shader</a></li>
    <li class="level2 nav-leaf"><a href="../howto-hello-indigo-tyrian/">How to make a responsive UI using Tyrian</a></li>
    <li class="level2 active nav-leaf"><a href="#">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level1 nav-header">Gameloop</li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/events/">Events</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/frame-context/">Frame context</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/outcome/">Outcome Type</a></li>
    <li class="level1 nav-header">Organisation</li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/boot-and-start-up/">Boot &amp; Start Up</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/game-entry-points/">Game Entry Points</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/scene-management/">What are Scenes?</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/subsystems/">What SubSystems are</a></li>
    <li class="level1 nav-header">Platform &amp; IO</li>
    <li class="level2 nav-leaf"><a href="../../05-platform/assets/">Assets &amp; Asset Loading</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/cross-platform-publishing/">Cross Platform Publishing</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/importers/">File Importers</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/input-handling/">Input Handling</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/loading-and-saving-data/">Loading &amp; Saving Data</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/logging/">Logging</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/networking/">Networking</a></li>
    <li class="level1 nav-header">Presentation</li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/animation/">Animation</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/audio/">Audio</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/boundaries/">Boundaries</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/cameras/">Cameras</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/clones-and-mutants/">Clones &amp; Mutants</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/depth/">Depth</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/layers/">Layers</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/lighting/">Lighting</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/materials/">Materials</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/primitives/">Primitives &amp; Building Blocks</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/scene-update-fragment/">SceneUpdateFragment</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/shapes/">Shapes</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/text-and-fonts/">Text &amp; Fonts</a></li>
    <li class="level1 nav-header">Shaders</li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/blending/">Blending</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/constants/">Shader Constants, Variables, and Outputs</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/premultiplied-alpha/">Premultiplied Alpha</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/shaders-overview/">Shaders Overview</a></li>
    <li class="level1 nav-header">Time</li>
    <li class="level2 nav-leaf"><a href="../../08-time/gametime/">GameTime</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/signals/">Signals &amp; Signal Functions</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/time-varying-values/">Time Varying Values</a></li>
    <li class="level1 nav-header">UI Components</li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/button/">Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/hit-area/">Hit Areas</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/input-field/">Input Fields</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/radio-button/">Radio Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/ui-components/">UI Components</a></li>
    <li class="level1 nav-header">Misc</li>
    <li class="level2 nav-leaf"><a href="../../10-information/alternatives/">Alternatives to Indigo</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/antipatterns/">Anti-Patterns</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/glossary/">Glossary</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/key-concepts/">Key Concepts</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/model-viewmodel-view/">Model, ViewModel, &amp; View</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/motivation-and-constraints/">Motivation &amp; Constraints</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/performance/">Performance</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/prior-art/">Prior Art</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/rendering-technology/">Rendering Technology</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#basic-concepts">Basic Concepts</a></li>
    <li class="level1 nav-leaf"><a href="#indigosandbox-to-indigogame"><code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level1 nav-leaf"><a href="#scene-management">Scene Management</a></li>
    <li class="level1 nav-leaf"><a href="#events">Events</a></li>
    <li class="level1 nav-leaf"><a href="#booting">Booting</a></li>
    <li class="level1 nav-leaf"><a href="#view-models">View Models</a></li>
    <li class="level1 nav-leaf"><a href="#presenting">Presenting</a></li>
    <li class="level1 nav-leaf"><a href="#compile-enjoy-and-further-reading">Compile, Enjoy, and Further Reading</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="converting-indigosandbox-to-indigogame" class="title">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></h1>
        
        <h2 id="basic-concepts" class="section"><a class="anchor-link left" href="#basic-concepts"><i class="icofont-laika link">&#xef71;</i></a>Basic Concepts</h2>
        <p>You may have noticed that many of our tutorials and examples make use of
        <code>IndigoSandbox</code> and <code>IndigoDemo</code>. But what if you want to go further than these
        examples? How would you add scene management, or deal with sub systems? In these
        cases it&#39;s time to move your game to use <code>IndigoGame</code>, which comes with a host
        of features, but also a lot more boiler-plate code.</p>
        <p>Note: In this tutorial we&#39;ll be moving our code to <code>IndigoGame</code> and using an
        empty scene, but we won&#39;t be making full use of the scene management.
        If you want to know more about managing scenes in Indigo you can read the
        documentation <a href="https://indigoengine.io/docs/organisation/scene-management">here</a>.</p>
        <p>Before we begin, we&#39;ll start by defining the types of data that <code>IndigoGame</code>
        uses and what they may be used for:</p>
        <ul>
          <li>BootData: Used for initial boot data, such as your foundation game settings</li>
          <li>StartUpData: Used for game data or config that may change during asset loading, screen resizes etc.</li>
          <li>Model: The model holding your main game data</li>
          <li>ViewModel: The model used when drawing data. Typically this is transformed from your model</li>
        </ul>
        
        <h2 id="indigosandbox-to-indigogame" class="section"><a class="anchor-link left" href="#indigosandbox-to-indigogame"><i class="icofont-laika link">&#xef71;</i></a><code>IndigoSandbox</code> to <code>IndigoGame</code></h2>
        <p>One of the main examples we have is called <code>hello-indigo</code>, which you can clone from
         <a href="https://github.com/PurpleKingdomGames/hello-indigo">here</a> (mill)
        or <a href="https://github.com/PurpleKingdomGames/hello-indigo-sbt">here</a> (sbt). In this
        tutorial we&#39;re going to take that example and convert it to <code>IndigoGame</code>.</p>
        <p>The first thing to do here is to make the initial conversion. Change the object declaration like so:</p>
        <pre class="keep-together pdf epub"><code class="diff"> @JSExportTopLevel(&quot;IndigoGame&quot;)
-object HelloIndigo extends IndigoSandbox[Unit, Model] {
+object HelloIndigo extends IndigoGame[Unit, Unit, Model, Unit] {</code></pre>
        <p>For this example we set boot and startup data to <code>Unit</code> (as we&#39;re not going to
        need them), keep our model, and then use <code>Unit</code> for the view model as well.</p>
        <p>This example doesn&#39;t use animations, fonts, or shaders, so we can remove those
        declarations too. We&#39;ll keep the asset declaration
        but it&#39;s worth noting that we no longer need to declare assets this way, we&#39;re
        keeping it like this for convenience.</p>
        <pre><code class="diff">   val config: GameConfig =
     GameConfig.default.withMagnification(magnification)

-  val animations: Set[Animation] =
-    Set()
-
   val assetName = AssetName(&quot;dots&quot;)

   val assets: Set[AssetType] =
       AssetType.Image(AssetName(&quot;dots&quot;), AssetPath(&quot;assets/dots.png&quot;))
     )

-  val fonts: Set[FontInfo] =
-    Set()

-  val shaders: Set[Shader] =
-    Set()</code></pre>
        
        <h2 id="scene-management" class="section"><a class="anchor-link left" href="#scene-management"><i class="icofont-laika link">&#xef71;</i></a>Scene Management</h2>
        <p><code>IndigoGame</code> comes with a built in scene manager. For this exercise we&#39;re using
        a single scene, so we may as well keep all our logic in this one file. For
        bigger projects though you&#39;ll want to explore
        <a href="https://indigoengine.io/docs/organisation/scene-management">how scenes work</a>.</p>
        <p>We&#39;ll need to import the appropriate package so that we can use scenes. We can
        do that by adding this line to our imports:</p>
        <pre class="keep-together pdf epub"><code class="diff"> import indigo._
+import indigo.scenes._
 import scala.scalajs.js.annotation.JSExportTopLevel</code></pre>
        <p>We&#39;re going to add a dummy scene to this game as we&#39;re doing a very simple
        example. This is done by adding the following lines to <code>HelloIndigo.scala</code>:</p>
        <pre class="keep-together pdf epub"><code class="diff">+  def initialScene(bootData: Unit): Option[SceneName] =
+    None
+
+  def scenes(bootData: Unit): NonEmptyList[Scene[Unit, Model, Unit]] =
+    NonEmptyList(Scene.empty)</code></pre>
        
        <h2 id="events" class="section"><a class="anchor-link left" href="#events"><i class="icofont-laika link">&#xef71;</i></a>Events</h2>
        <p>We&#39;ll need to filter our events, after all it&#39;s inefficient to send all events
        to your game if you aren&#39;t needing to process them. We&#39;ll use the permissive
        event filters here, as that excludes subsystem specific events, but will
        allow the click event, which is the only one we need right now. Add the following:</p>
        <pre class="keep-together pdf epub"><code class="diff">+  val eventFilters: EventFilters =
+    EventFilters.Permissive</code></pre>
        
        <h2 id="booting" class="section"><a class="anchor-link left" href="#booting"><i class="icofont-laika link">&#xef71;</i></a>Booting</h2>
        <p>We can now tell Indigo which assets to load at
        <a href="https://indigoengine.io/docs/organisation/boot-and-start-up">boot time</a>.
        This is where we&#39;ll make use of the assets and config <code>val</code> that we left earlier.
        Add the following:</p>
        <pre class="keep-together pdf epub"><code class="diff">+  def boot(flags: Map[String, String]): Outcome[BootResult[Unit]] =
+    Outcome(
+      BootResult
+        .noData(config)
+        .withAssets(assets)
+    )</code></pre>
        <p>We&#39;ll also need to add the boot data to the <code>setup</code> signature:</p>
        <pre class="keep-together pdf epub"><code class="diff">  def setup(
+     bootData: Unit,
      assetCollection: AssetCollection,
      dice: Dice
  ): </code></pre>
        <p>Here we&#39;re telling Indigo to boot using the config already assigned and
        the &#39;dots&#39; asset. It&#39;s worth noting that if anything fails at this stage
        Indigo won&#39;t boot.</p>
        
        <h2 id="view-models" class="section"><a class="anchor-link left" href="#view-models"><i class="icofont-laika link">&#xef71;</i></a>View Models</h2>
        <p>We&#39;re almost done! Just a couple more steps and we can compile and see our handy
        work.</p>
        <p>We need to tell Indigo how to initialise and update our view models. As
        we&#39;re using <code>Unit</code> for our view models, this is simply a case of passing that
        back for both instances. We can do this like so:</p>
        <pre class="keep-together pdf epub"><code class="diff">+  def initialViewModel(startupData: Unit, model: Model): Outcome[Unit] =
+    Outcome(())
+
+  def updateViewModel(
+      context: FrameContext[Unit],
+      model: Model,
+      viewModel: Unit
+  ): GlobalEvent =&gt; Outcome[Unit] =
+    _ =&gt; Outcome(())</code></pre>
        
        <h2 id="presenting" class="section"><a class="anchor-link left" href="#presenting"><i class="icofont-laika link">&#xef71;</i></a>Presenting</h2>
        <p>The <code>present</code> method is ever so slightly different for an <code>IndigoGame</code> as it
        also takes a View Model as an argument. Simply add the correct argument like so:</p>
        <pre class="keep-together pdf epub"><code class="diff">   def present(
       context: FrameContext[Unit],
-      model: Model
+      model: Model,
+      viewModel: Unit
   ): Outcome[SceneUpdateFragment] =</code></pre>
        
        <h2 id="compile-enjoy-and-further-reading" class="section"><a class="anchor-link left" href="#compile-enjoy-and-further-reading"><i class="icofont-laika link">&#xef71;</i></a>Compile, Enjoy, and Further Reading</h2>
        <p>And that&#39;s it! If you now compile that code and run it either in a browser or
        in electron the results should be exactly the same as they were before. If,
        for whatever reason, you&#39;ve gotten a compile error or something looks wrong
        you can refer
        <a href="https://gist.github.com/hobnob/c24f00936e91a7b7e5d644d19e4f1b32">here</a> for the
        full file and <a href="https://gist.github.com/hobnob/9a1e5a2d1039576948e3a904d915fc64">here</a>
        for the diff.</p>
        <p>What we&#39;ve done here is fine for a single scene simple example, but when you
        need to separate your code into more defined instances (such as main menus, or
        levels) you will want to work with scenes and learn about
        <a href="https://indigoengine.io/docs/organisation/scene-management">Scene Management</a>.</p>
        <p>As you continue to use Indigo, you&#39;ll want to capture many events from the
        player. A list of the types of events that Indigo supports out of the box can be
        found <a href="https://indigoengine.io/docs/gameloop/events">here</a>.</p>
        <p>Hopefully you&#39;ve found all that useful. If you find that you&#39;re struggling, have
        questions, or just want a chat about all things Indigo, you can find a very
        friendly community hanging out on <a href="https://discord.gg/b5CD47g">Discord</a>.</p>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>