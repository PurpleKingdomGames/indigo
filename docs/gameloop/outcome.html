<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Outcome Type · Indigo</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## What is an Outcome?"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Outcome Type · Indigo"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/"/><meta property="og:description" content="## What is an Outcome?"/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/indigo_logo_solid.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://your-docusaurus-test-site.com/blog/atom.xml" title="Indigo Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://your-docusaurus-test-site.com/blog/feed.xml" title="Indigo Blog RSS Feed"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-169190516-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-169190516-1');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/indigo_logo_solid_text.svg" alt="Indigo"/><h2 class="headerTitleWithLogo">Indigo</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/docs/guides" target="_self">Guides</a></li><li class="siteNavGroupActive"><a href="/docs/development-status" target="_self">Docs</a></li><li class=""><a href="/api/" target="_self">APIs</a></li><li class=""><a href="/tools" target="_self">Tools</a></li><li class=""><a href="https://github.com/PurpleKingdomGames/indigo" target="_blank">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>The game loop</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Indigo</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/development-status">Indigo&#x27;s Development Status</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/quickstart/setup-and-configuration">Setup &amp; Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/quickstart/examples">Examples</a></li><li class="navListItem"><a class="navItem" href="/docs/quickstart/project-templates">Mill &amp; SBT Game Templates</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Organising your game</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/organisation/boot-and-start-up">Boot &amp; Start Up</a></li><li class="navListItem"><a class="navItem" href="/docs/organisation/game-entry-points">Game Entry Points</a></li><li class="navListItem"><a class="navItem" href="/docs/organisation/scene-management">Scenes &amp; Scene Management</a></li><li class="navListItem"><a class="navItem" href="/docs/organisation/subsystems">SubSystems</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">The game loop</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/gameloop/events">Events</a></li><li class="navListItem"><a class="navItem" href="/docs/gameloop/frame-context">Frame context</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/gameloop/outcome">Outcome Type</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Presentation</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/presentation/animation">Animation</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/audio">Audio</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/boundaries">Boundaries</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/cameras">Cameras</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/clones-and-mutants">Clones &amp; Mutants</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/depth">Depth</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/layers">Layers</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/lighting">Lighting</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/materials">Materials</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/primitives">Primitives &amp; Building Blocks</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/scene-update-fragment">SceneUpdateFragment</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/shapes">Shapes</a></li><li class="navListItem"><a class="navItem" href="/docs/presentation/text-and-fonts">Text &amp; Fonts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">UI Components</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/uicomponents/ui-components">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/uicomponents/button">Buttons</a></li><li class="navListItem"><a class="navItem" href="/docs/uicomponents/hit-area">Hit Area</a></li><li class="navListItem"><a class="navItem" href="/docs/uicomponents/input-field">Input Field</a></li><li class="navListItem"><a class="navItem" href="/docs/uicomponents/radio-button">Radio Button</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Shaders</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/shaders/shader-overview">Shaders Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/shaders/constants">Shader Constants, Variables, and Outputs</a></li><li class="navListItem"><a class="navItem" href="/docs/shaders/blending">Blending</a></li><li class="navListItem"><a class="navItem" href="/docs/shaders/premultiplied-alpha">Premultiplied Alpha</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Working with Time</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/time/signals">Signals &amp; Signal Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/time/time-varying-values">Time Varying Values</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Platform &amp; Publishing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/platform/assets">Assets &amp; Asset Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/platform/cross-platform-publishing">Cross Platform Publishing</a></li><li class="navListItem"><a class="navItem" href="/docs/platform/importers">File Format Importers</a></li><li class="navListItem"><a class="navItem" href="/docs/platform/input-handling">User Input Handling</a></li><li class="navListItem"><a class="navItem" href="/docs/platform/loading-and-saving-data">Loading &amp; Saving Data</a></li><li class="navListItem"><a class="navItem" href="/docs/platform/logging">Logging</a></li><li class="navListItem"><a class="navItem" href="/docs/platform/networking">Networking</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Other information</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/information/alternatives">Alternatives to Indigo</a></li><li class="navListItem"><a class="navItem" href="/docs/information/glossary">Glossary</a></li><li class="navListItem"><a class="navItem" href="/docs/information/key-concepts">Key Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/information/model-viewmodel-view">Model, ViewModel, &amp; View</a></li><li class="navListItem"><a class="navItem" href="/docs/information/antipatterns">Anti-Patterns</a></li><li class="navListItem"><a class="navItem" href="/docs/information/motivation-and-constraints">Motivation &amp; Constraints</a></li><li class="navListItem"><a class="navItem" href="/docs/information/performance">Performance</a></li><li class="navListItem"><a class="navItem" href="/docs/information/prior-art">Prior Art</a></li><li class="navListItem"><a class="navItem" href="/docs/information/rendering-technology">Rendering Technology</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Outcome Type</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="what-is-an-outcome"></a><a href="#what-is-an-outcome" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is an Outcome?</h2>
<p>The <code>Outcome</code> type is one you'll see a lot.</p>
<p>All of the key functions produce an Outcome. An Outcome is the combination of an updated piece of state, and a list of <code>GlobalEvent</code>s that updating the state produced. It can also represent an error that you may or may not be able to recover from.</p>
<p>For example, let's say you update your game's model, and it turns out that the player has lost the game somehow. You might need to do two things:</p>
<ol>
<li>Update the model to reflect the fact that the player's turn is over - perhaps calculating the final score.</li>
<li>Emit a <code>JumpTo(SceneName(&quot;game over&quot;))</code> event to tell Indigo to render the Game Over screen.</li>
</ol>
<p>This could be described in an Outcome as follows:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> indigo.*
<span class="hljs-keyword">import</span> indigo.scenes.*

<span class="hljs-keyword">final</span> <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Model</span>(<span class="hljs-params">totalScore: <span class="hljs-type">Int</span></span>)</span>
<span class="hljs-keyword">val</span> model = <span class="hljs-type">Model</span>(<span class="hljs-number">0</span>)
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calculateFinalScore</span></span>(score: <span class="hljs-type">Int</span>): <span class="hljs-type">Int</span> = score + <span class="hljs-number">10</span>

<span class="hljs-keyword">val</span> outcome = 
  <span class="hljs-type">Outcome</span>(model.copy(totalScore = calculateFinalScore(model.totalScore)))
    .addGlobalEvents(<span class="hljs-type">SceneEvent</span>.<span class="hljs-type">JumpTo</span>(<span class="hljs-type">SceneName</span>(<span class="hljs-string">"game over"</span>)))
</code></pre>
<p>You can access the state or global events with:</p>
<pre><code class="hljs css language-scala">outcome.getOrElse(<span class="hljs-type">Model</span>(<span class="hljs-number">0</span>))
outcome.globalEventsOrNil
</code></pre>
<div id="mdoc-html-run1" data-mdoc-js></div>
<p>Notice that the syntax is similar to an option (<code>getOrElse</code>), this is because outcomes can fail and represent an error that you may be able to recover from.</p>
<p>However the expectation is that you will generally access the values of an Outcome by mapping or perhaps in a for comprehension.</p>
<h2><a class="anchor" aria-hidden="true" id="examples-of-operations-on-outcomes"></a><a href="#examples-of-operations-on-outcomes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples of Operations on Outcomes</h2>
<p>There are lots of ways to manipulate Outcomes, and all of them preserve the events contained in each Outcome.</p>
<h3><a class="anchor" aria-hidden="true" id="basic-operations"></a><a href="#basic-operations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic operations</h3>
<p>An Outcome behaves much like other Monadic types in Scala such as <code>Option</code> or <code>Either</code>. They are bias towards the state it holds rather than the events. Some basic operations are below:</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>)                                <span class="hljs-comment">// Outcome(10)</span>
<span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>).map(_ * <span class="hljs-number">20</span>)                    <span class="hljs-comment">// Outcome(200)</span>
<span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>).ap(<span class="hljs-type">Outcome</span>((i: <span class="hljs-type">Int</span>) =&gt; i * <span class="hljs-number">5</span>)) <span class="hljs-comment">// Outcome(50)</span>
<span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>).flatMap(i =&gt; <span class="hljs-type">Outcome</span>(i * <span class="hljs-number">20</span>))  <span class="hljs-comment">// Outcome(200)</span>
<span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>).merge(<span class="hljs-type">Outcome</span>(<span class="hljs-number">20</span>))(_ + _)      <span class="hljs-comment">// Outcome(30)</span>
<span class="hljs-type">Outcome</span>(<span class="hljs-string">"a"</span>) combine <span class="hljs-type">Outcome</span>(<span class="hljs-string">"b"</span>)          <span class="hljs-comment">// Outcome(("a", "b"))</span>
</code></pre>
<div id="mdoc-html-run2" data-mdoc-js></div>
<p>As mentioned, <code>Outcome</code>'s map function is bias towards the state, but you can also modify the events with <code>mapGlobalEvents</code>.</p>
<p>Sequencing can be done as follows:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> <span class="hljs-type">Outcome</span>.*

<span class="hljs-type">Batch</span>(<span class="hljs-type">Outcome</span>(<span class="hljs-number">1</span>), <span class="hljs-type">Outcome</span>(<span class="hljs-number">2</span>), <span class="hljs-type">Outcome</span>(<span class="hljs-number">3</span>)).sequence <span class="hljs-comment">// Outcome(Batch(1, 2, 3))</span>
</code></pre>
<div id="mdoc-html-run3" data-mdoc-js></div>
<h2><a class="anchor" aria-hidden="true" id="creating-events-based-on-the-state"></a><a href="#creating-events-based-on-the-state" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating events based on the state</h2>
<p>Sometimes, you need to reference the new state to decide if we should emit an event:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">final</span> <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span>(<span class="hljs-params">count: <span class="hljs-type">Int</span></span>)</span>

<span class="hljs-keyword">val</span> newState = <span class="hljs-type">Counter</span>(count = <span class="hljs-number">10</span>)
<span class="hljs-keyword">val</span> events = <span class="hljs-keyword">if</span>(newState.count &gt; <span class="hljs-number">5</span>) <span class="hljs-type">Batch</span>(<span class="hljs-type">PlaySound</span>(<span class="hljs-type">AssetName</span>(<span class="hljs-string">"tada"</span>), <span class="hljs-type">Volume</span>.<span class="hljs-type">Max</span>)) <span class="hljs-keyword">else</span> <span class="hljs-type">Batch</span>.empty

<span class="hljs-type">Outcome</span>(newState)
  .addGlobalEvents(events)
</code></pre>
<p>But this is boring and requires the creation of a couple of variables. The thing to observe is that this scenario is about creating events based on the <em>updated</em> state rather than the original state. Instead, you can do this:</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">Outcome</span>(<span class="hljs-type">Counter</span>(count = <span class="hljs-number">10</span>))
  .createGlobalEvents(foo =&gt; <span class="hljs-keyword">if</span>(foo.count &gt; <span class="hljs-number">5</span>) <span class="hljs-type">Batch</span>(<span class="hljs-type">PlaySound</span>(<span class="hljs-type">AssetName</span>(<span class="hljs-string">"tada"</span>), <span class="hljs-type">Volume</span>.<span class="hljs-type">Max</span>)) <span class="hljs-keyword">else</span> <span class="hljs-type">Batch</span>.empty)
</code></pre>
<div id="mdoc-html-run5" data-mdoc-js></div>
<p>Here, <code>foo</code> is the state held in the <code>Outcome</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="error-handling"></a><a href="#error-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h2>
<blockquote>
<p>Indigo 0.6.0 or later</p>
</blockquote>
<p>The <code>Outcome</code> type also comes with error handling.</p>
<p>If an exception is thrown within an outcome's constructor then it will be caught in a similar way to Scala standard <code>Try</code> monad. E.g.:</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">Outcome</span>(<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Exception</span>(<span class="hljs-string">"Boom!"</span>))
</code></pre>
<div id="mdoc-html-run6" data-mdoc-js></div>
<p>Exceptions are a fact of life on the JVM and also in JS. If you access an array index outside it's range, you'll get an exception.</p>
<p>You can model errors with types like <code>Either[Error, A]</code> or as an ADT that live in your <code>Outcome</code> as it's value:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">sealed</span> <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">MyJourney</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">HappyPath</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MyJourney</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">UnhappyPath</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MyJourney</span> <span class="hljs-title">//</span> <span class="hljs-title">Error</span> <span class="hljs-title">case</span></span>
</code></pre>
<div id="mdoc-html-run7" data-mdoc-js></div>
<p>You could think of these as expected unhappy paths. ...but you're still going to get exceptions from time to time - at least during development.</p>
<p>In Indigo, the hope it that 99 times out of 100 you can get away with an ADT or an <code>Either</code> because you've done lots of testing and the unhappy paths are <em>recoverable</em> in a way that is fairly local to the place where the error occurred so that your game can continue. It would be a shame to crash the game.</p>
<p>Sometimes though, you can recover <em>eventually</em> but you need to bail out right now. This is where it might be appropriate to throw an exception or raise an error (<code>Outcome.raiseError(e)</code>) in an outcome.</p>
<p>To handle such an error, we can do the following:</p>
<blockquote>
<p>Please note that - contrary to the following example - you should really only catch exceptions you're expecting by declaring a class that extends Exception and catching that.</p>
</blockquote>
<pre><code class="hljs css language-scala"><span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>)
  .map[<span class="hljs-type">Int</span>](_ =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Exception</span>(<span class="hljs-string">"Boom!"</span>))
  .map(i =&gt; i * i)
  .handleError {
    <span class="hljs-keyword">case</span> e =&gt;
      <span class="hljs-type">Outcome</span>(e.getMessage.length)
  }
</code></pre>
<div id="mdoc-html-run8" data-mdoc-js></div>
<p>Here we start with a value and throw an exception during the first map. We attempt to map the value again, but it's ignored and the exception is carried over. We then handle the error with a partial function that allows us to recover back to a (slightly suspect) <code>Outcome[Int]</code> again.</p>
<p><strong>If you game is going to crash, then you ought to let it crash.</strong></p>
<p>That said, if your game is going to crash then it might be helpful to log something useful in the dying moments. Indigo itself looks out for exceptions and attempts to log them before it crashes a game. You can give it something meaningful to log by using the <code>logCrash</code> outcome method. Invoked similarly to <code>handleError</code> above, it is a partial function that takes an exception and returns any string value you like. Indigo then logs this message before the game crashes.</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">Outcome</span>(<span class="hljs-number">10</span>)
  .map[<span class="hljs-type">Int</span>](i =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Exception</span>(i.toString))
  .map(i =&gt; i * i)
  .logCrash {
    <span class="hljs-keyword">case</span> e =&gt;
      <span class="hljs-string">"The game crashed at integer:"</span> + e.getMessage
  }
</code></pre>
<div id="mdoc-html-run9" data-mdoc-js></div>
<script type="text/javascript" src="outcome.md.js" defer></script>
<script type="text/javascript" src="mdoc.js" defer></script>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/gameloop/frame-context"><span class="arrow-prev">← </span><span>Frame context</span></a><a class="docs-next button" href="/docs/presentation/animation"><span>Animation</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#what-is-an-outcome">What is an Outcome?</a></li><li><a href="#examples-of-operations-on-outcomes">Examples of Operations on Outcomes</a><ul class="toc-headings"><li><a href="#basic-operations">Basic operations</a></li></ul></li><li><a href="#creating-events-based-on-the-state">Creating events based on the state</a></li><li><a href="#error-handling">Error handling</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/indigo_logo.svg" alt="Indigo" width="66" height="58"/></a><div><h5>Getting Started</h5><a href="/docs/en/quickstart/setup-and-configuration">Setup &amp; Configuration Guide</a><a href="/docs/en/quickstart/hello-indigo">&quot;Hello, Indigo!&quot; Tutorial</a><a href="/docs/en/quickstart/examples">Links to examples</a><a href="/docs/en/quickstart/project-templates">Project templates</a></div><div><h5>Community</h5><a href="https://discord.gg/b5CD47g">Discord</a><a href="https://github.com/PurpleKingdomGames/indigo/discussions">GitHub Discussons</a><a href="https://twitter.com/indigoengine" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>Sponsor us!</h5><a href="https://github.com/sponsors/PurpleKingdomGames">GitHub Sponsors</a><a href="https://www.patreon.com/indigoengine">Patreon</a></div></section></footer></div></body></html>