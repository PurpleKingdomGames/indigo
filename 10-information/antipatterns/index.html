<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Anti-Patterns</title>
  
  
  <meta name="description" content="A 2D Pixel Art FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  <link rel="icon" sizes="64x64" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../"><img src="../../img/indigo_logo_solid_text.svg" alt="Homepage" title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../table-of-content/">Contents</a></li>
    <li class="level1 nav-header">Setup &amp; Configuration</li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/examples/">Examples, Demos, and References</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/extensions-and-libs/">Extensions, Libraries, and Related Projects</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/hello-indigo/">Hello, Indigo!</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/project-templates/">Mill &amp; SBT Templates</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/quickstart/">Quick start</a></li>
    <li class="level1 nav-header">Guides</li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-custom-entity/">How to make a custom entity</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-fire-shader/">How to write a fire shader</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-hello-indigo-tyrian/">How to make a responsive UI using Tyrian</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-indigo-game/">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level1 nav-header">Gameloop</li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/events/">Events</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/frame-context/">Frame context</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/outcome/">Outcome Type</a></li>
    <li class="level1 nav-header">Organisation</li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/boot-and-start-up/">Boot &amp; Start Up</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/game-entry-points/">Game Entry Points</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/scene-management/">What are Scenes?</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/subsystems/">What SubSystems are</a></li>
    <li class="level1 nav-header">Platform &amp; IO</li>
    <li class="level2 nav-leaf"><a href="../../05-platform/assets/">Assets &amp; Asset Loading</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/configuration/">Game Configuration</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/cross-platform-publishing/">Cross Platform Publishing</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/importers/">File Importers</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/input-handling/">Input Handling</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/loading-and-saving-data/">Loading &amp; Saving Data</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/logging/">Logging</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/networking/">Networking</a></li>
    <li class="level1 nav-header">Presentation</li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/animation/">Animation</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/audio/">Audio</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/boundaries/">Boundaries</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/cameras/">Cameras</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/clones-and-mutants/">Clones &amp; Mutants</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/depth/">Depth</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/layers/">Layers</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/lighting/">Lighting</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/materials/">Materials</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/primitives/">Primitives &amp; Building Blocks</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/scene-update-fragment/">SceneUpdateFragment</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/shapes/">Shapes</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/text-and-fonts/">Text &amp; Fonts</a></li>
    <li class="level1 nav-header">Shaders</li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/blending/">Blending</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/constants/">Shader Constants, Variables, and Outputs</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/premultiplied-alpha/">Premultiplied Alpha</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/shaders-overview/">Shaders Overview</a></li>
    <li class="level1 nav-header">Time</li>
    <li class="level2 nav-leaf"><a href="../../08-time/gametime/">GameTime</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/signals/">Signals &amp; Signal Functions</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/time-varying-values/">Time Varying Values</a></li>
    <li class="level1 nav-header">UI Components</li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/button/">Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/hit-area/">Hit Areas</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/input-field/">Input Fields</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/radio-button/">Radio Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/ui-components/">UI Components</a></li>
    <li class="level1 nav-header">Misc</li>
    <li class="level2 nav-leaf"><a href="../alternatives/">Alternatives to Indigo</a></li>
    <li class="level2 active nav-leaf"><a href="#">Anti-Patterns</a></li>
    <li class="level2 nav-leaf"><a href="../glossary/">Glossary</a></li>
    <li class="level2 nav-leaf"><a href="../key-concepts/">Key Concepts</a></li>
    <li class="level2 nav-leaf"><a href="../model-viewmodel-view/">Model, ViewModel, &amp; View</a></li>
    <li class="level2 nav-leaf"><a href="../motivation-and-constraints/">Motivation &amp; Constraints</a></li>
    <li class="level2 nav-leaf"><a href="../pathfinding/">Path finding</a></li>
    <li class="level2 nav-leaf"><a href="../performance/">Performance</a></li>
    <li class="level2 nav-leaf"><a href="../prior-art/">Prior Art</a></li>
    <li class="level2 nav-leaf"><a href="../rendering-technology/">Rendering Technology</a></li>
    <li class="level1 nav-header">Physics</li>
    <li class="level2 nav-leaf"><a href="../../11-physics/physics-overview/">Physics Overview</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Anti-Patterns</a></p>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="#general-advice">General advice</a></li>
    <li class="level2 nav-leaf"><a href="#uni-directional-data-flows">Uni-directional data flows</a></li>
    <li class="level1 nav-node"><a href="#anti-patterns-and-traps">Anti-patterns and traps</a></li>
    <li class="level2 nav-leaf"><a href="#feedback">Feedback</a></li>
    <li class="level2 nav-leaf"><a href="#simultaneous-updates">Simultaneous updates</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="anti-patterns" class="title">Anti-Patterns</h1>
        <p>This page is an attempt to flag any anti-patterns, bad practices or traps that the authors have seen in the wild or have themselves fallen into! The hope is that but not repeating these mistakes your game dev&#39;ving will be more fun and fruitful.</p>
        
        <h2 id="general-advice" class="section"><a class="anchor-link left" href="#general-advice"><i class="icofont-laika link">&#xef71;</i></a>General advice</h2>
        
        <h3 id="uni-directional-data-flows" class="section"><a class="anchor-link left" href="#uni-directional-data-flows"><i class="icofont-laika link">&#xef71;</i></a>Uni-directional data flows</h3>
        <p>The main thing to remember when building in Indigo is that is follows a uni-directional data flow. That is to say that the data all goes in one direction.</p>
        
        <h2 id="anti-patterns-and-traps" class="section"><a class="anchor-link left" href="#anti-patterns-and-traps"><i class="icofont-laika link">&#xef71;</i></a>Anti-patterns and traps</h2>
        
        <h3 id="feedback" class="section"><a class="anchor-link left" href="#feedback"><i class="icofont-laika link">&#xef71;</i></a>Feedback</h3>
        <p>A common thing to do, is to organise your game model into a hierarchy of classes/objects, and then have methods that delegate or invoke methods on their sub-objects who in turn need to somehow update their parent. As you can imagine, this can get very hairy very quickly.</p>
        
        <h4 id="example-health-potions" class="section"><a class="anchor-link left" href="#example-health-potions"><i class="icofont-laika link">&#xef71;</i></a>Example: Health potions</h4>
        <p>In your game, all characters - player or otherwise - have an inventory:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Player</span><span>(</span><span class="identifier">health</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">inventory</span><span>: </span><span class="type-name">Inventory</span><span>)</span></code></pre>
        <p>Your player can can pick up health potions around the game and store them in their inventory, which can only hold one health potion at a time. Lets model the inventory as dumbly as possible to keep this really simple:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">object</span><span> </span><span class="type-name">HealthPotion</span><span>
</span><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Inventory</span><span>(</span><span class="identifier">healthPotion</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>]):

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">add</span><span>(</span><span class="identifier">hp</span><span>: </span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>): </span><span class="type-name">Inventory</span><span> = 
    </span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">healthPotion</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="identifier">hp</span><span>))

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">use</span><span>: </span><span class="type-name">Inventory</span><span> =
    </span><span class="identifier">healthPotion</span><span> </span><span class="keyword">match</span><span>
      </span><span class="keyword">case</span><span> </span><span class="type-name">None</span><span> =&gt; </span><span class="keyword">this</span><span>
      </span><span class="keyword">case</span><span> </span><span class="type-name">Some</span><span>(</span><span class="identifier">hp</span><span>) =&gt; </span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">healthPotion</span><span> = </span><span class="type-name">None</span><span>)</span></code></pre>
        <p>We&#39;ve given it nice little <code>add</code> and <code>use</code> methods too! While we&#39;re at it, the player needs updating:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Player</span><span>(</span><span class="identifier">health</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">inventory</span><span>: </span><span class="type-name">Inventory</span><span>):

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">add</span><span>(</span><span class="identifier">hp</span><span>: </span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>): </span><span class="type-name">Player</span><span> =
    </span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">inventory</span><span> = </span><span class="identifier">inventory</span><span>.</span><span class="identifier">add</span><span>(</span><span class="identifier">hp</span><span>))

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">use</span><span>: </span><span class="type-name">Player</span><span> =
    </span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">inventory</span><span> = </span><span class="identifier">inventory</span><span>.</span><span class="identifier">use</span><span>)</span></code></pre>
        <p>&lt;div id=&quot;mdoc-html-run2&quot; data-mdoc-js&gt;&lt;/div&gt;</p>
        <p>Now you can call <code>add</code> or <code>use</code> on player and it delegates through to the inventory and everything is immutably updated. Great.</p>
        <p>...there&#39;s some problems here though, lets look at two in particular:</p>
        <ol class="arabic">
          <li>What if we&#39;re already carrying a health potion and we try and insert another one?</li>
        </ol>
        <ol class="arabic">
          <li>The <code>use</code> method certainly removes the health potion from our possession, but how do we update the players health?</li>
        </ol>
        <p>The anti-pattern is to try and feedback to the parent directly, consider these modifications to our inventory methods:</p>
        <pre class="keep-together pdf epub"><code class="diff">-def add(hp: HealthPotion): Inventory
+def add(hp: HealthPotion): (Inventory, Boolean)</code></pre>
        <p>Here we are adding a boolean to the return type to say &quot;succeeded in adding the potion&quot; (or not).</p>
        <pre class="keep-together pdf epub"><code class="diff">-def use: Inventory
+def use(player: Player): (Inventory, Player)</code></pre>
        <p>Here again we&#39;re going to inflate the return type so that now we can accept the player (our parent object), fiddle with it, and give it back... to itself... yuk!</p>
        
        <h4 id="solution-events" class="section"><a class="anchor-link left" href="#solution-events"><i class="icofont-laika link">&#xef71;</i></a>Solution: Events</h4>
        <p>Instead of doing any weird feedback with the return types, we can just use the <code>Outcome</code> type to fire off events, consider the following alternate inventory implementation:</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*

</span><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">CannotAddThis</span><span>(</span><span class="identifier">healthPotion</span><span>: </span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>) </span><span class="keyword">extends</span><span> </span><span class="type-name">GlobalEvent</span><span>
</span><span class="keyword">case</span><span> </span><span class="keyword">object</span><span> </span><span class="type-name">NoHealthPotionToUse</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">GlobalEvent</span><span>
</span><span class="keyword">case</span><span> </span><span class="keyword">object</span><span> </span><span class="type-name">IncreasePlayerHealth</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">GlobalEvent</span><span>

</span><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">AltInventory</span><span>(</span><span class="identifier">healthPotion</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>]):

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">add</span><span>(</span><span class="identifier">hp</span><span>: </span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">AltInventory</span><span>] =
    </span><span class="identifier">healthPotion</span><span> </span><span class="keyword">match</span><span>
      </span><span class="keyword">case</span><span> </span><span class="type-name">None</span><span> =&gt;
        </span><span class="type-name">Outcome</span><span>(</span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">healthPotion</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="identifier">hp</span><span>)))

      </span><span class="keyword">case</span><span> </span><span class="type-name">Some</span><span>(</span><span class="identifier">_</span><span>) =&gt;
        </span><span class="type-name">Outcome</span><span>(</span><span class="keyword">this</span><span>)
          .</span><span class="identifier">addGlobalEvents</span><span>(</span><span class="type-name">CannotAddThis</span><span>(</span><span class="identifier">hp</span><span>))

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">use</span><span>: </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">AltInventory</span><span>] =
    </span><span class="identifier">healthPotion</span><span> </span><span class="keyword">match</span><span>
      </span><span class="keyword">case</span><span> </span><span class="type-name">None</span><span> =&gt;
        </span><span class="type-name">Outcome</span><span>(</span><span class="keyword">this</span><span>)
          .</span><span class="identifier">addGlobalEvents</span><span>(</span><span class="type-name">NoHealthPotionToUse</span><span>)

      </span><span class="keyword">case</span><span> </span><span class="type-name">Some</span><span>(</span><span class="identifier">hp</span><span>) =&gt;
        </span><span class="type-name">Outcome</span><span>(</span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">healthPotion</span><span> = </span><span class="type-name">None</span><span>))
          .</span><span class="identifier">addGlobalEvents</span><span>(</span><span class="type-name">IncreasePlayerHealth</span><span>)</span></code></pre>
        <p>Now, when we consume a health potion we either report that there was one, or that the players health should be increased. Equally if we try to add a potion to an already full inventory, we report the problem and return the item. The events are collected on the next frame and actioned.</p>
        <p>This will require a change to our player too to make it work:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">AltPlayer</span><span>(</span><span class="identifier">health</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">inventory</span><span>: </span><span class="type-name">AltInventory</span><span>):

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">add</span><span>(</span><span class="identifier">hp</span><span>: </span><span class="type-name">HealthPotion</span><span>.</span><span class="keyword">type</span><span>): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">AltPlayer</span><span>] =
    </span><span class="identifier">inventory</span><span>.</span><span class="identifier">add</span><span>(</span><span class="identifier">hp</span><span>).</span><span class="identifier">map</span><span> { </span><span class="identifier">inv</span><span> =&gt;
      </span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">inventory</span><span> = </span><span class="identifier">inv</span><span>)
    }

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">use</span><span>: </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">AltPlayer</span><span>] =
    </span><span class="identifier">inventory</span><span>.</span><span class="identifier">use</span><span>.</span><span class="identifier">map</span><span> { </span><span class="identifier">inv</span><span> =&gt;
      </span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">inventory</span><span> = </span><span class="identifier">inv</span><span>)
    }</span></code></pre>
        <p>&lt;div id=&quot;mdoc-html-run4&quot; data-mdoc-js&gt;&lt;/div&gt;</p>
        <p>When we call <code>use</code>, it now returns an <code>Outcome[Inventory]</code> which we can map over (retaining any events created when we called <code>inventory.use</code>) and update our player.</p>
        <p>Note that we don&#39;t try and update the player&#39;s health yet. To do that we&#39;d add a new <code>increaseHealth</code> method to <code>AltPlayer</code> and have it invoked when the <code>updateModel</code> function receives the <code>IncreasePlayerHealth</code> event.</p>
        
        <h3 id="simultaneous-updates" class="section"><a class="anchor-link left" href="#simultaneous-updates"><i class="icofont-laika link">&#xef71;</i></a>Simultaneous updates</h3>
        <p>One place where uni-directional data flows begin to feel awkward and difficult, is when you need to update two things at once, where one&#39;s update depends on the other&#39;s update.</p>
        
        <h4 id="example-moving-bad-guys" class="section"><a class="anchor-link left" href="#example-moving-bad-guys"><i class="icofont-laika link">&#xef71;</i></a>Example: Moving bad guys</h4>
        <p>There are two bad guys moving on a grid towards the player. There is only one empty space in front of the player, but on the next turn, both bad guys could walk into that space, <em>unless</em> they were blocked by the other. Mapping over a list of bad guys is not sufficient because a <code>map</code> operation doesn&#39;t know how it&#39;s neighbours have been affected, and can only have the previous positions as context. In other words, if you just did <code>badguys.map(move)</code> they&#39;d both end up in the same space.</p>
        <p>What can you do?</p>
        
        <h4 id="solution-recursion" class="section"><a class="anchor-link left" href="#solution-recursion"><i class="icofont-laika link">&#xef71;</i></a>Solution: Recursion</h4>
        <p>If the updates must happen right now on this frame, then one solution is recursion. By processing each bad guy in turn and having the context of the updated bad guys so far available, you can avoid collisions.</p>
        <p>In pseudo-scala code:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="annotation">@tailrec</span><span>
</span><span class="keyword">def</span><span> </span><span class="declaration-name">moveBadGuys</span><span>(</span><span class="identifier">notMoved</span><span>: </span><span class="type-name">List</span><span>[</span><span class="type-name">BadGuy</span><span>], </span><span class="identifier">moved</span><span>: </span><span class="type-name">List</span><span>[</span><span class="type-name">BadGuy</span><span>]): </span><span class="type-name">List</span><span>[</span><span class="type-name">BadGuy</span><span>] =
  </span><span class="identifier">notMoved</span><span> </span><span class="keyword">match</span><span>
    </span><span class="keyword">case</span><span> </span><span class="type-name">Nil</span><span> =&gt; </span><span class="identifier">moved</span><span>
    </span><span class="keyword">case</span><span> </span><span class="identifier">nextBadGuy</span><span> :: </span><span class="identifier">remainingBadGuys</span><span> =&gt;
      </span><span class="keyword">val</span><span> </span><span class="identifier">nextPosition</span><span> =
        </span><span class="comment">// decide next position while checking for conflicts
</span><span>        </span><span class="comment">// within `moved`.
</span><span>        ???
      </span><span class="identifier">moveBadGuys</span><span>(</span><span class="identifier">remainingBadGuys</span><span>, </span><span class="identifier">nextBadGuy</span><span>.</span><span class="identifier">move</span><span>(</span><span class="identifier">nextPosition</span><span>) :: </span><span class="identifier">moved</span><span>)</span></code></pre>
        <p>&lt;script type=&quot;text/javascript&quot; src=&quot;antipatterns.md.js&quot; defer&gt;&lt;/script&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;mdoc.js&quot; defer&gt;&lt;/script&gt;</p>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>