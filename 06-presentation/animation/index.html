<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Animation</title>
  
  
  <meta name="description" content="A 2D Pixel Art FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  <link rel="icon" sizes="64x64" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../"><img src="../../img/indigo_logo_solid_text.svg" alt="Homepage" title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../table-of-content/">Contents</a></li>
    <li class="level1 nav-header">Setup &amp; Configuration</li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/examples/">Examples, Demos, and References</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/extensions-and-libs/">Extensions, Libraries, and Related Projects</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/hello-indigo/">Hello, Indigo!</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/project-templates/">Mill &amp; SBT Templates</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/quickstart/">Quick start</a></li>
    <li class="level1 nav-header">Guides</li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-custom-entity/">How to make a custom entity</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-fire-shader/">How to write a fire shader</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-hello-indigo-tyrian/">How to make a responsive UI using Tyrian</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-indigo-game/">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level1 nav-header">Gameloop</li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/events/">Events</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/frame-context/">Frame context</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/outcome/">Outcome Type</a></li>
    <li class="level1 nav-header">Organisation</li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/boot-and-start-up/">Boot &amp; Start Up</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/game-entry-points/">Game Entry Points</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/scene-management/">What are Scenes?</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/subsystems/">What SubSystems are</a></li>
    <li class="level1 nav-header">Platform &amp; IO</li>
    <li class="level2 nav-leaf"><a href="../../05-platform/assets/">Assets &amp; Asset Loading</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/configuration/">Game Configuration</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/cross-platform-publishing/">Cross Platform Publishing</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/importers/">File Importers</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/input-handling/">Input Handling</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/loading-and-saving-data/">Loading &amp; Saving Data</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/logging/">Logging</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/networking/">Networking</a></li>
    <li class="level1 nav-header">Presentation</li>
    <li class="level2 active nav-leaf"><a href="#">Animation</a></li>
    <li class="level2 nav-leaf"><a href="../audio/">Audio</a></li>
    <li class="level2 nav-leaf"><a href="../boundaries/">Boundaries</a></li>
    <li class="level2 nav-leaf"><a href="../cameras/">Cameras</a></li>
    <li class="level2 nav-leaf"><a href="../clones-and-mutants/">Clones &amp; Mutants</a></li>
    <li class="level2 nav-leaf"><a href="../depth/">Depth</a></li>
    <li class="level2 nav-leaf"><a href="../layers/">Layers</a></li>
    <li class="level2 nav-leaf"><a href="../lighting/">Lighting</a></li>
    <li class="level2 nav-leaf"><a href="../materials/">Materials</a></li>
    <li class="level2 nav-leaf"><a href="../primitives/">Primitives &amp; Building Blocks</a></li>
    <li class="level2 nav-leaf"><a href="../scene-update-fragment/">SceneUpdateFragment</a></li>
    <li class="level2 nav-leaf"><a href="../shapes/">Shapes</a></li>
    <li class="level2 nav-leaf"><a href="../text-and-fonts/">Text &amp; Fonts</a></li>
    <li class="level1 nav-header">Shaders</li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/blending/">Blending</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/constants/">Shader Constants, Variables, and Outputs</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/premultiplied-alpha/">Premultiplied Alpha</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/shaders-overview/">Shaders Overview</a></li>
    <li class="level1 nav-header">Time</li>
    <li class="level2 nav-leaf"><a href="../../08-time/gametime/">GameTime</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/signals/">Signals &amp; Signal Functions</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/time-varying-values/">Time Varying Values</a></li>
    <li class="level1 nav-header">UI Components</li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/button/">Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/hit-area/">Hit Areas</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/input-field/">Input Fields</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/radio-button/">Radio Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/ui-components/">UI Components</a></li>
    <li class="level1 nav-header">Misc</li>
    <li class="level2 nav-leaf"><a href="../../10-information/alternatives/">Alternatives to Indigo</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/antipatterns/">Anti-Patterns</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/glossary/">Glossary</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/key-concepts/">Key Concepts</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/model-viewmodel-view/">Model, ViewModel, &amp; View</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/motivation-and-constraints/">Motivation &amp; Constraints</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/pathfinding/">Path finding</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/performance/">Performance</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/prior-art/">Prior Art</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/rendering-technology/">Rendering Technology</a></li>
    <li class="level1 nav-header">Physics</li>
    <li class="level2 nav-leaf"><a href="../../11-physics/physics-overview/">Physics Overview</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Animation</a></p>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="#keyframe-animations">Keyframe Animations</a></li>
    <li class="level2 nav-leaf"><a href="#registering-animations-for-sprites">Registering animations (for <code>Sprite</code>s)</a></li>
    <li class="level2 nav-leaf"><a href="#structure">Structure</a></li>
    <li class="level1 nav-node"><a href="#procedural-animations">Procedural Animations</a></li>
    <li class="level2 nav-leaf"><a href="#timeline-animations">Timeline Animations</a></li>
    <li class="level2 nav-leaf"><a href="#signals-signal-functions">Signals &amp; Signal Functions</a></li>
    <li class="level2 nav-leaf"><a href="#hand-crafted-animation-code">Hand crafted animation code</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="animation" class="title">Animation</h1>
        <p>There are two types of animations found in Indigo.</p>
        <ol class="arabic">
          <li>Keyframe based animations.</li>
          <li>Procedural / programmed animations.</li>
        </ol>
        
        <h2 id="keyframe-animations" class="section"><a class="anchor-link left" href="#keyframe-animations"><i class="icofont-laika link">&#xef71;</i></a>Keyframe Animations</h2>
        <p>Indigo is a &quot;code-only&quot; game engine, there is no GUI or asset creation pipeline. As such, the expectation is that you&#39;ll use another tool in order to manufacture animation sprite sheets, and import them into Indigo.</p>
        <p>An example of this is that Indigo has support for <a href="https://www.aseprite.org/">Aseprite</a> (an excellent pixel art editor and animation tool), and the process is:</p>
        <ol class="arabic">
          <li>Create your animation in Aseprite.</li>
          <li>Export the animations and frames as a sprite sheet and a JSON description.</li>
          <li>Add the sprite sheet and JSON description as a static asset to Indigo.</li>
          <li>Then Either:</li>
        </ol>
        <ol class="arabic">
          <li>Use Indigo&#39;s Mill/sbt plugin to generate an <code>Aseprite</code> instance at build time, OR,</li>
        </ol>
        <ol class="arabic">
          <li>During startup (runtime), use Indigo&#39;s (confusingly named) <code>Json</code> object to parse the JSON into an <code>Animation</code> instance using the <code>asepriteFromJson</code> function, and add it to the <code>Startup</code> result type, thereby making it available to your game.</li>
        </ol>
        <p>You can then either turn that into a <code>Sprite</code> or a series of <code>Clip</code>s.</p>
        <p>For <code>Sprite</code>s:</p>
        <ol class="arabic">
          <li>You can create a <code>Sprite</code> from the loaded <code>Aseprite</code> and associate it to the Animation using an <code>AnimationKey</code>.</li>
          <li>In your game view logic, you can then control the animation by calling the animation methods on the sprite: <code>play</code>, <code>changeCycle</code>, <code>jumpToFirstFrame</code>, <code>jumpToLastFrame</code>, and <code>jumpToFrame</code>.</li>
        </ol>
        <p>Or, for <code>Clip</code>s, you can create a <code>Map</code> of <code>CycleLabel -&gt; Clip</code> from the loaded <code>Aseprite</code> and insert them into your game scene.</p>
        <p>See the <a href="https://github.com/PurpleKingdomGames/indigo/blob/master/examples/sprite/src/main/scala/indigoexamples/SpriteExample.scala">Sprite example</a> for a very basic, hand rolled animation example.</p>
        <blockquote>Caution: If two sprites have the same animation key they will play the same animation in the same place using the same cycle - or more correctly - whatever the latter sprite instructed the animation to do. This is very useful! ...but can also cause confusion.</blockquote>
        
        <h3 id="registering-animations-for-sprites" class="section"><a class="anchor-link left" href="#registering-animations-for-sprites"><i class="icofont-laika link">&#xef71;</i></a>Registering animations (for <code>Sprite</code>s)</h3>
        <p>Animations are registered in two ways:</p>
        <ol class="arabic">
          <li>During boot up, which happens exactly once.</li>
          <li>As part of the set up process on the resulting <code>Startup</code> data type, which is called whenever new assets are loaded.</li>
        </ol>
        <p>You can think of boot and setup as &quot;nothing happens until I&#39;ve finished&quot; and &quot;the game could be running by now&quot; respectively. The idea of allowing you to load assets and add animations during boot is that you may need a minimal set of data to show such things as loading animations (AKA preloaders).</p>
        <p>During boot, how you add your animations depends on the entry point you are using.</p>
        <p>With <code>IndigoSandbox</code> you will add your animations to:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*

</span><span class="keyword">val</span><span> </span><span class="identifier">myAnimation</span><span>: </span><span class="type-name">Animation</span><span> = </span><span class="type-name">Animation</span><span>(</span><span class="type-name">AnimationKey</span><span>(</span><span class="string-literal">&quot;my anim&quot;</span><span>), </span><span class="type-name">Frame</span><span>(</span><span class="type-name">Rectangle</span><span>(</span><span class="number-literal">0</span><span>, </span><span class="number-literal">0</span><span>, </span><span class="number-literal">32</span><span>, </span><span class="number-literal">32</span><span>), </span><span class="type-name">Millis</span><span>(</span><span class="number-literal">100</span><span>)))

</span><span class="keyword">val</span><span> </span><span class="identifier">animations</span><span>: </span><span class="type-name">Set</span><span>[</span><span class="type-name">Animation</span><span>] = </span><span class="type-name">Set</span><span>(</span><span class="identifier">myAnimation</span><span>)</span></code></pre>
        <p>However, to add an animation to the boot sequence of <code>IndigoDemo</code> or <code>IndigoGame</code>, you will need to add them to the <code>BootResult</code>:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">BootResult</span><span>.</span><span class="identifier">noData</span><span>(</span><span class="type-name">GameConfig</span><span>.</span><span class="keyword">default</span><span>).</span><span class="identifier">addAnimations</span><span>(</span><span class="identifier">myAnimation</span><span>)</span></code></pre>
        <div id="mdoc-html-run1" data-mdoc-js></div>
        <p>During setup, you can add an animation like this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">Startup</span><span>.</span><span class="type-name">Success</span><span>(()).</span><span class="identifier">addAnimations</span><span>(</span><span class="identifier">myAnimation</span><span>)</span></code></pre>
        <div id="mdoc-html-run2" data-mdoc-js></div>
        <p>The advantage of adding animations during the set up stage is that they can be based on loaded data, for example an imported Aseprite animation.</p>
        
        <h3 id="structure" class="section"><a class="anchor-link left" href="#structure"><i class="icofont-laika link">&#xef71;</i></a>Structure</h3>
        <p>An instance of an animation actually contains at least one sub-animation, called a <code>Cycle</code>. <code>Cycle</code>s are animations of the same subject matter doing different things. For example: If you export a sprite sheet for you character, your sheet will contain several animations cycles such as an idle cycle, a walk cycle, a jump cycle etc.</p>
        
        <h2 id="procedural-animations" class="section"><a class="anchor-link left" href="#procedural-animations"><i class="icofont-laika link">&#xef71;</i></a>Procedural Animations</h2>
        <p>Procedural animations are any animations and movements produced as a result of code execution, and can be seen in a few forms, notably:</p>
        <ul>
          <li>Timeline animations</li>
          <li>Signals &amp; Signal Functions</li>
          <li>Hand coded animations</li>
        </ul>
        
        <h3 id="timeline-animations" class="section"><a class="anchor-link left" href="#timeline-animations"><i class="icofont-laika link">&#xef71;</i></a>Timeline Animations</h3>
        <blockquote>The <code>Timeline</code> type is new as of Indigo 0.14.0.</blockquote>
        <p>Timelines allow you to describe animations over time using a combination of <code>SignalFunction</code>s and a nice DSL.</p>
        <p>To make use of Timelines, add the following imports:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*
</span><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.</span><span class="identifier">syntax</span><span>.*
</span><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.</span><span class="identifier">syntax</span><span>.</span><span class="identifier">animations</span><span>.*</span></code></pre>
        <p>This allows you to write timelines that look like this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">tl</span><span>: </span><span class="type-name">Timeline</span><span>[</span><span class="type-name">Graphic</span><span>[</span><span class="type-name">Material</span><span>.</span><span class="type-name">Bitmap</span><span>]] =
  </span><span class="identifier">timeline</span><span>(
    </span><span class="identifier">layer</span><span>(
      </span><span class="identifier">startAfter</span><span>(</span><span class="number-literal">2</span><span>.</span><span class="identifier">seconds</span><span>),
      </span><span class="identifier">animate</span><span>(</span><span class="number-literal">5</span><span>.</span><span class="identifier">seconds</span><span>) { </span><span class="identifier">graphic</span><span> =&gt;
        </span><span class="identifier">easeInOut</span><span> &gt;&gt;&gt;
          </span><span class="identifier">lerp</span><span>(</span><span class="type-name">Point</span><span>(</span><span class="number-literal">0</span><span>), </span><span class="type-name">Point</span><span>(</span><span class="number-literal">100</span><span>)) &gt;&gt;&gt;
          </span><span class="type-name">SignalFunction</span><span>(</span><span class="identifier">pt</span><span> =&gt; </span><span class="identifier">graphic</span><span>.</span><span class="identifier">moveTo</span><span>(</span><span class="identifier">pt</span><span>))
      }
    )
  )</span></code></pre>
        <p>Each timeline can animate one type of thing, but they and their sub components are reusable and composable. The one above is animating a <code>Graphic</code>.</p>
        <p>Timelines are build up of &#39;layers&#39; which are each their own sequence of &#39;time slots&#39;, such as the ones you can see above (i.e. <code>startAfter</code> and <code>animate</code>). </p>
        <p>Time slots form a back-to-back chain of things to do. There are two here but you can have as many as you like. If you wanted to add another animated value - say you wanted to fade the graphic in by altering its material&#39;s alpha property - then you would add another layer. The two layers would then be squashed together automatically to produce the end result.</p>
        <p>In this animation, we have one layer that initially waits 2 seconds. Then over the next 5 seconds, it calculates a points position diagonally (lerp means linear interpolation) from (0, 0) to (100, 100), and finally moves a graphic to that position. All of this is performed using an &#39;ease-in-out&#39; function that accelerates the movement up initially and slows it down towards the end.</p>
        <p>The function inside the <code>animate</code> block is built up using <code>SignalFunction</code>s (see below) to describe the value transformation that results in the animated movement. There are lots of helpful signal functions available on the <code>SignalFunction</code> companion object for you to make use of.</p>
        <blockquote>Timelines do now know that they are for animation, and can &#39;animate&#39; anything at all. We just need to change our idea of animation from something like &#39;moving a picture&#39; to &#39;producing a value over time following a series of transformations&#39;.</blockquote>
        <p>To render our timeline in our scene, we can ask it to produce it&#39;s result like this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">tl</span><span>.</span><span class="identifier">at</span><span>(</span><span class="identifier">context</span><span>.</span><span class="identifier">running</span><span>)(</span><span class="identifier">myGraphic</span><span>).</span><span class="identifier">toBatch</span></code></pre>
        <p>This supplies the timeline with the running time and the graphic to animate, and then it converts that into a <code>Batch</code> ready to be inserted into the scene somewhere. Without the conversion to a batch, the timeline would produce an optional value.</p>
        
        <h3 id="signals-signal-functions" class="section"><a class="anchor-link left" href="#signals-signal-functions"><i class="icofont-laika link">&#xef71;</i></a>Signals &amp; Signal Functions</h3>
        <p>Signals in Indigo are pretty simplistic as Signal implementations go, and yet are extremely useful.</p>
        <p>As a brief introduction to <code>Signal</code>s, a signal is a value of type: <code>t: Seconds -&gt; A</code> where <code>t</code> is the current time and <code>A</code> is <em>some value of <code>A</code> to produce based on a time <code>t</code></em>.</p>
        <p>For example:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*

</span><span class="comment">// a signal that outputs 10 &#39;units&#39; per second
</span><span class="keyword">val</span><span> </span><span class="identifier">signal</span><span>: </span><span class="type-name">Signal</span><span>[</span><span class="type-name">Double</span><span>] = </span><span class="type-name">Signal</span><span>(</span><span class="identifier">t</span><span> =&gt; </span><span class="identifier">t</span><span>.</span><span class="identifier">toDouble</span><span> * </span><span class="number-literal">10</span><span>)

</span><span class="identifier">signal</span><span>.</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">0.0</span><span>)) </span><span class="comment">// 0
</span><span class="identifier">signal</span><span>.</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">1.0</span><span>)) </span><span class="comment">// 10
</span><span class="identifier">signal</span><span>.</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">1.5</span><span>)) </span><span class="comment">// 15
</span><span class="identifier">signal</span><span>.</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">2.0</span><span>)) </span><span class="comment">// 20</span></code></pre>
        <p>You can also use them to bend time:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">signal</span><span>.</span><span class="identifier">affectTime</span><span>(</span><span class="number-literal">0.5</span><span>).</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">2.0</span><span>)) </span><span class="comment">// 10
</span><span class="identifier">signal</span><span>.</span><span class="identifier">affectTime</span><span>(</span><span class="number-literal">1.0</span><span>).</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">2.0</span><span>)) </span><span class="comment">// 20
</span><span class="identifier">signal</span><span>.</span><span class="identifier">affectTime</span><span>(</span><span class="number-literal">1.5</span><span>).</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">2.0</span><span>)) </span><span class="comment">// 30</span></code></pre>
        <div id="mdoc-html-run4" data-mdoc-js></div>
        <p>There are a range of pre-made Signal types you can play with, such as <code>Lerp</code> and <code>Orbit</code>, but the power of them is that you can combine and transform them.</p>
        <p>Signals themselves are Functors up to Monad and compose in all the usual ways.</p>
        <p><code>SignalFunction</code>s are Signal combinators. Combinators are functions that take a function and return a function, in this case: <code>Signal[A] =&gt; Signal[B]</code> which is really:</p>
        <p><code>(t: Seconds -&gt; A) -&gt; (t: Seconds -&gt; B)</code></p>
        <p>That&#39;s getting complicated but luckily Signal functions, being functors, can be created from any function <code>A =&gt; B</code>, which is much easier to think about.</p>
        <p>Signal functions in indigo have only two operations:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="comment">// Operation 1: &quot;and then&quot; function composition. `andThen` and it&#39;s alias `&gt;&gt;&gt;`
</span><span class="keyword">def</span><span> &gt;&gt;&gt;[</span><span class="type-name">C</span><span>](</span><span class="identifier">other</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">B</span><span>, </span><span class="type-name">C</span><span>]): </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">C</span><span>] = ???
</span><span class="keyword">def</span><span> </span><span class="declaration-name">andThen</span><span>[</span><span class="type-name">C</span><span>](</span><span class="identifier">other</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">B</span><span>, </span><span class="type-name">C</span><span>]): </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">C</span><span>] = ???

</span><span class="comment">//Operation 2: Parallel input. Run A =&gt; B &amp; A =&gt; C and return (B, C)
</span><span class="keyword">def</span><span> &amp;&amp;&amp;[</span><span class="type-name">C</span><span>](</span><span class="identifier">other</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">C</span><span>]): </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">A</span><span>, (</span><span class="type-name">B</span><span>, </span><span class="type-name">C</span><span>)] = ???
</span><span class="keyword">def</span><span> </span><span class="declaration-name">and</span><span>[</span><span class="type-name">C</span><span>](</span><span class="identifier">other</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">A</span><span>, </span><span class="type-name">C</span><span>]): </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">A</span><span>, (</span><span class="type-name">B</span><span>, </span><span class="type-name">C</span><span>)] = ???</span></code></pre>
        <p>Example, one could calculate an orbit like this:</p>
        <pre><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">xPos</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">Radians</span><span>, </span><span class="type-name">Double</span><span>] =
  </span><span class="type-name">SignalFunction</span><span>(</span><span class="identifier">r</span><span> =&gt; </span><span class="type-name">Math</span><span>.</span><span class="identifier">sin</span><span>(</span><span class="identifier">r</span><span>.</span><span class="identifier">toDouble</span><span>))

</span><span class="keyword">val</span><span> </span><span class="identifier">yPos</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">Radians</span><span>, </span><span class="type-name">Double</span><span>] =
  </span><span class="type-name">SignalFunction</span><span>(</span><span class="identifier">r</span><span> =&gt; </span><span class="type-name">Math</span><span>.</span><span class="identifier">cos</span><span>(</span><span class="identifier">r</span><span>.</span><span class="identifier">toDouble</span><span>))

</span><span class="keyword">def</span><span> </span><span class="declaration-name">distance</span><span>(</span><span class="identifier">d</span><span>: </span><span class="type-name">Double</span><span>): </span><span class="type-name">SignalFunction</span><span>[(</span><span class="type-name">Double</span><span>, </span><span class="type-name">Double</span><span>), (</span><span class="type-name">Int</span><span>, </span><span class="type-name">Int</span><span>)] =
  </span><span class="type-name">SignalFunction</span><span> {
    </span><span class="keyword">case</span><span> (</span><span class="identifier">x</span><span>, </span><span class="identifier">y</span><span>) =&gt;
      ((</span><span class="identifier">x</span><span> * </span><span class="identifier">d</span><span>).</span><span class="identifier">toInt</span><span>, (</span><span class="identifier">y</span><span> * </span><span class="identifier">d</span><span>).</span><span class="identifier">toInt</span><span>)
  }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">giveCords</span><span>(</span><span class="identifier">range</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Signal</span><span>[(</span><span class="type-name">Int</span><span>, </span><span class="type-name">Int</span><span>)] =
  </span><span class="type-name">Signal</span><span>(</span><span class="identifier">t</span><span> =&gt; </span><span class="type-name">Radians</span><span>.</span><span class="identifier">fromSeconds</span><span>(</span><span class="identifier">t</span><span>)) |&gt; (</span><span class="identifier">xPos</span><span> &amp;&amp;&amp; </span><span class="identifier">yPos</span><span>) &gt;&gt;&gt; </span><span class="identifier">distance</span><span>(</span><span class="identifier">range</span><span>)</span></code></pre>
        <div id="mdoc-html-run5" data-mdoc-js></div>
        <p>Then calling <code>giveCords(100).at(t)</code> with different values of <code>t</code> would give you various positions on an orbit with a distance of 100 around a world 0,0 coordinate where 1 full orbit takes 1 second.</p>
        <p>It works by:</p>
        <ol class="arabic">
          <li>Making a <code>Signal</code> representing the angle in radians based on the time.</li>
          <li>Parallel running the angle through the <code>xPos</code> and <code>yPos</code> <code>SignalFunction</code>s to get the <code>x</code> and <code>y</code> in a range of -1 to +1.</li>
          <li>Piping the xy through the <code>distance</code> <code>SignalFuction</code> to shift the coordinates out the desired range.</li>
        </ol>
        
        <h3 id="hand-crafted-animation-code" class="section"><a class="anchor-link left" href="#hand-crafted-animation-code"><i class="icofont-laika link">&#xef71;</i></a>Hand crafted animation code</h3>
        <p>It is entirely reasonable to just do the animation yourself - you&#39;re a capable programmer after all! How hard can it be to make something move across the screen?</p>
        <p>The main gotcha to be aware of with this kind of programming, is that the amount of time that passes between frames is not consistent. In other words, you can&#39;t add <code>1</code> to a characters <code>x</code> position and expect it to move smoothly across the screen.</p>
        <p>All movement must therefore be described in terms of the amount of time that has passed, and there are a few helpful functions on the <code>GameTime</code> instance you are supplied with to help you do that. The typical approach is to work out how many &#39;units per second&#39; your animated thing should run at, and multiply that by the time delta provided in the <code>FrameContext</code>.</p>
        <p>Sprite and Clip based animations and Signals already have time either taken care of or factored into the equation for you in some way or other.
        <script type="text/javascript" src="animation.md.js" defer></script>
        <script type="text/javascript" src="mdoc.js" defer></script></p>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>