<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>SceneUpdateFragment</title>
  
  
  <meta name="description" content="A 2D Pixel Art FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  <link rel="icon" sizes="64x64" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../"><img src="../../img/indigo_logo_solid_text.svg" alt="Homepage" title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../table-of-content/">Contents</a></li>
    <li class="level1 nav-header">Setup &amp; Configuration</li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/examples/">Examples, Demos, and References</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/extensions-and-libs/">Extensions, Libraries, and Related Projects</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/hello-indigo/">Hello, Indigo!</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/project-templates/">Mill &amp; SBT Templates</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/quickstart/">Quick start</a></li>
    <li class="level1 nav-header">Guides</li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-custom-entity/">How to make a custom entity</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-fire-shader/">How to write a fire shader</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-hello-indigo-tyrian/">How to make a responsive UI using Tyrian</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-indigo-game/">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level1 nav-header">Gameloop</li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/events/">Events</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/frame-context/">Frame context</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/outcome/">Outcome Type</a></li>
    <li class="level1 nav-header">Organisation</li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/boot-and-start-up/">Boot &amp; Start Up</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/game-entry-points/">Game Entry Points</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/scene-management/">What are Scenes?</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/subsystems/">What SubSystems are</a></li>
    <li class="level1 nav-header">Platform &amp; IO</li>
    <li class="level2 nav-leaf"><a href="../../05-platform/assets/">Assets &amp; Asset Loading</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/configuration/">Game Configuration</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/cross-platform-publishing/">Cross Platform Publishing</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/importers/">File Importers</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/input-handling/">Input Handling</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/loading-and-saving-data/">Loading &amp; Saving Data</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/logging/">Logging</a></li>
    <li class="level2 nav-leaf"><a href="../../05-platform/networking/">Networking</a></li>
    <li class="level1 nav-header">Presentation</li>
    <li class="level2 nav-leaf"><a href="../animation/">Animation</a></li>
    <li class="level2 nav-leaf"><a href="../audio/">Audio</a></li>
    <li class="level2 nav-leaf"><a href="../boundaries/">Boundaries</a></li>
    <li class="level2 nav-leaf"><a href="../cameras/">Cameras</a></li>
    <li class="level2 nav-leaf"><a href="../clones-and-mutants/">Clones &amp; Mutants</a></li>
    <li class="level2 nav-leaf"><a href="../depth/">Depth</a></li>
    <li class="level2 nav-leaf"><a href="../layers/">Layers</a></li>
    <li class="level2 nav-leaf"><a href="../lighting/">Lighting</a></li>
    <li class="level2 nav-leaf"><a href="../materials/">Materials</a></li>
    <li class="level2 nav-leaf"><a href="../primitives/">Primitives &amp; Building Blocks</a></li>
    <li class="level2 active nav-leaf"><a href="#">SceneUpdateFragment</a></li>
    <li class="level2 nav-leaf"><a href="../shapes/">Shapes</a></li>
    <li class="level2 nav-leaf"><a href="../text-and-fonts/">Text &amp; Fonts</a></li>
    <li class="level1 nav-header">Shaders</li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/blending/">Blending</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/constants/">Shader Constants, Variables, and Outputs</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/premultiplied-alpha/">Premultiplied Alpha</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/shaders-overview/">Shaders Overview</a></li>
    <li class="level1 nav-header">Time</li>
    <li class="level2 nav-leaf"><a href="../../08-time/gametime/">GameTime</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/signals/">Signals &amp; Signal Functions</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/time-varying-values/">Time Varying Values</a></li>
    <li class="level1 nav-header">UI Components</li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/button/">Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/hit-area/">Hit Areas</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/input-field/">Input Fields</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/radio-button/">Radio Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/ui-components/">UI Components</a></li>
    <li class="level1 nav-header">Misc</li>
    <li class="level2 nav-leaf"><a href="../../10-information/alternatives/">Alternatives to Indigo</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/antipatterns/">Anti-Patterns</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/glossary/">Glossary</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/key-concepts/">Key Concepts</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/model-viewmodel-view/">Model, ViewModel, &amp; View</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/motivation-and-constraints/">Motivation &amp; Constraints</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/pathfinding/">Path finding</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/performance/">Performance</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/prior-art/">Prior Art</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/rendering-technology/">Rendering Technology</a></li>
    <li class="level1 nav-header">Physics</li>
    <li class="level2 nav-leaf"><a href="../../11-physics/physics-overview/">Physics Overview</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">SceneUpdateFragment</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#relationship-with-layers">Relationship with <code>Layer</code>s</a></li>
    <li class="level1 nav-leaf"><a href="#what-can-you-describe">What can you describe?</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="sceneupdatefragment" class="title">SceneUpdateFragment</h1>
        <p>The <code>SceneUpdateFragment</code> is one of the most important types in Indigo, as it is the type that describes everything you want your player to experience.</p>
        <p>Below is an example of it&#39;s usage:</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*

</span><span class="keyword">val</span><span> </span><span class="identifier">graphic</span><span> =
  </span><span class="type-name">Graphic</span><span>(</span><span class="number-literal">50</span><span>, </span><span class="number-literal">50</span><span>, </span><span class="type-name">Material</span><span>.</span><span class="type-name">Bitmap</span><span>(</span><span class="type-name">AssetName</span><span>(</span><span class="string-literal">&quot;placeholder&quot;</span><span>))
    .</span><span class="identifier">withLighting</span><span>(</span><span class="type-name">LightingModel</span><span>.</span><span class="type-name">Lit</span><span>.</span><span class="identifier">flat</span><span>))

</span><span class="type-name">SceneUpdateFragment</span><span>(
    </span><span class="type-name">BindingKey</span><span>(</span><span class="string-literal">&quot;game layer&quot;</span><span>) -&gt; </span><span class="type-name">Layer</span><span>(</span><span class="identifier">graphic</span><span>)
  )
  .</span><span class="identifier">withLights</span><span>(
    </span><span class="type-name">AmbientLight</span><span>(</span><span class="type-name">RGBA</span><span>.</span><span class="type-name">White</span><span>.</span><span class="identifier">withAmount</span><span>(</span><span class="number-literal">0.25</span><span>)),
    </span><span class="type-name">PointLight</span><span>.</span><span class="keyword">default</span><span>
      .</span><span class="identifier">moveTo</span><span>(</span><span class="type-name">Point</span><span>(</span><span class="number-literal">50</span><span>, </span><span class="number-literal">50</span><span>))
      .</span><span class="identifier">withColor</span><span>(</span><span class="type-name">RGBA</span><span>.</span><span class="type-name">Green</span><span>)
  )</span></code></pre>
        <p>Unlike <code>Outcome</code>, <code>SceneUpdateFragment</code>s are not Functors, but they are Monoids, which is to say that:</p>
        <ol class="arabic">
          <li>There is a concept of an identity value, <code>SceneUpdateFragment.empty</code>, that if you add it to another <code>SceneUpdateFragment</code> it has no effect.</li>
          <li>There is an append operation <code>|+|</code> for combining to of them together.</li>
        </ol>
        <p>This is really important as it allows you to build parts of your scene up in lots of different ways, and then easily and reliably combine all the results together at the end. For example:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">sceneAudio</span><span>: </span><span class="type-name">SceneUpdateFragment</span><span> = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">background</span><span>: </span><span class="type-name">SceneUpdateFragment</span><span> = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">clouds</span><span>: </span><span class="type-name">SceneUpdateFragment</span><span> = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">player</span><span>: </span><span class="type-name">SceneUpdateFragment</span><span> = ???
</span><span class="keyword">val</span><span> </span><span class="identifier">foreground</span><span>: </span><span class="type-name">SceneUpdateFragment</span><span> = ???

</span><span class="identifier">sceneAudio</span><span> |+| </span><span class="identifier">background</span><span> |+| </span><span class="identifier">clouds</span><span> |+| </span><span class="identifier">player</span><span> |+| </span><span class="identifier">foreground</span></code></pre>
        <div id="mdoc-html-run1" data-mdoc-js></div>
        <p>Consider also the following:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">visible</span><span> = </span><span class="boolean-literal">true</span><span>
</span><span class="keyword">val</span><span> </span><span class="identifier">vanishingThing</span><span> =
  </span><span class="keyword">if</span><span>(</span><span class="identifier">visible</span><span>) </span><span class="type-name">SceneUpdateFragment</span><span>(</span><span class="identifier">graphic</span><span>)
  </span><span class="keyword">else</span><span> </span><span class="type-name">SceneUpdateFragment</span><span>.</span><span class="identifier">empty</span><span>

</span><span class="type-name">SceneUpdateFragment</span><span>(</span><span class="identifier">graphic</span><span>) |+| </span><span class="identifier">vanishingThing</span></code></pre>
        <div id="mdoc-html-run2" data-mdoc-js></div>
        <p>Or this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">scene</span><span> = </span><span class="type-name">SceneUpdateFragment</span><span>(</span><span class="identifier">graphic</span><span>)
</span><span class="keyword">val</span><span> </span><span class="identifier">b</span><span>: </span><span class="type-name">Batch</span><span>[</span><span class="type-name">SceneUpdateFragment</span><span>] = </span><span class="type-name">Batch</span><span>(</span><span class="identifier">scene</span><span>, </span><span class="identifier">scene</span><span>, </span><span class="identifier">scene</span><span>)

</span><span class="identifier">b</span><span>.</span><span class="identifier">foldLeft</span><span>(</span><span class="type-name">SceneUpdateFragment</span><span>.</span><span class="identifier">empty</span><span>)(</span><span class="identifier">_</span><span> |+| </span><span class="identifier">_</span><span>)</span></code></pre>
        <div id="mdoc-html-run3" data-mdoc-js></div>
        <p>There are some special rules about what happens when you combine <code>SceneUpdateFragment</code>s that optionally have things like cameras. The rules are: Lists are concatenated in the expected way. Optional elements (cameras, blend materials, scene audio elements) are &quot;appended&quot; such that a defined element is always taken in preference to an undefined element, and if two are defined, the last or &quot;incoming&quot; version is assumed to be the desired one. Consider the following illustration:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">a</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>] = </span><span class="type-name">Some</span><span>(</span><span class="number-literal">1</span><span>)
</span><span class="keyword">val</span><span> </span><span class="identifier">b</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">Int</span><span>] = </span><span class="type-name">None</span><span>

(</span><span class="identifier">a</span><span>, </span><span class="identifier">b</span><span>) </span><span class="keyword">match</span><span>
  </span><span class="keyword">case</span><span> (</span><span class="type-name">None</span><span>, </span><span class="type-name">None</span><span>)       =&gt; </span><span class="type-name">None</span><span>
  </span><span class="keyword">case</span><span> (</span><span class="type-name">Some</span><span>(</span><span class="identifier">i</span><span>), </span><span class="type-name">None</span><span>)    =&gt; </span><span class="type-name">Some</span><span>(</span><span class="identifier">i</span><span>)
  </span><span class="keyword">case</span><span> (</span><span class="type-name">None</span><span>, </span><span class="type-name">Some</span><span>(</span><span class="identifier">i</span><span>))    =&gt; </span><span class="type-name">Some</span><span>(</span><span class="identifier">i</span><span>)
  </span><span class="keyword">case</span><span> (</span><span class="type-name">Some</span><span>(</span><span class="identifier">_</span><span>), </span><span class="type-name">Some</span><span>(</span><span class="identifier">i</span><span>)) =&gt; </span><span class="type-name">Some</span><span>(</span><span class="identifier">i</span><span>)</span></code></pre>
        <div id="mdoc-html-run4" data-mdoc-js></div>
        
        <h2 id="relationship-with-layers" class="section"><a class="anchor-link left" href="#relationship-with-layers"><i class="icofont-laika link">&#xef71;</i></a>Relationship with <code>Layer</code>s</h2>
        <p>Layers describe horizontal bands through the total scene that need to be drawn. Ultimately all layers are part of the final scene, and as such the resulting <code>SceneUpdateFragment</code> acts in some regards as a fall back or default state. For example, if a camera is defined on a layer it will be used first, but if not the scene level camera will be used (or else a default).</p>
        <p>An exception to this is lights. Since there is no need to set them, scene level lights are assumed to be important. You can display a maximum of 8 lights per layer (they can be different on each layer) and Indigo chooses the lights to use by first selecting all the scene lights, then adding on all the layer lights, and taking the first 8.</p>
        <p>It is worth noting that when you append two scene update fragments together where they both contains <a href="../layers/">layers</a> that have the same binding keys, those layers will be joined together with the original layer positions preserved. A good pattern is to establish an initial placeholder scene with the layers you need in place, empty but correctly ordered. Then whenever you append a new scene update fragment, the contents will be added to the right places in the expected order.</p>
        
        <h2 id="what-can-you-describe" class="section"><a class="anchor-link left" href="#what-can-you-describe"><i class="icofont-laika link">&#xef71;</i></a>What can you describe?</h2>
        <p>The <code>SceneUpdateFragment</code> has a fairly rich API that you can explore, but at a high level allows you to describe the following:</p>
        <ul>
          <li><strong>Layers</strong>: A list of <a href="../layers/">layers</a> to help structure your visuals and how they are presented.</li>
          <li><strong>Lights</strong>: A list of dynamic <a href="../lighting/">lights</a> that affect nodes with the right materials.</li>
          <li><strong>Audio</strong>: Background <a href="../audio/">audio</a> tracks and volume mixing.</li>
          <li><strong>A scene blend material</strong>: Used in <a href="../../07-shaders/blending/">blending</a>, unlike layers you cannot change the blend mode, only the blend material.</li>
          <li><strong>Clone blanks</strong>: A list of nodes used as look up reference for Cloning.</li>
          <li><strong>Scene Camera</strong>: A default <a href="../cameras/">camera</a>.
          <script type="text/javascript" src="scene-update-fragment.md.js" defer></script>
          <script type="text/javascript" src="mdoc.js" defer></script></li>
        </ul>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>