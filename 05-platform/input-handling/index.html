<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Input Handling</title>
  
  
  <meta name="description" content="A 2D Pixel Art FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  <link rel="icon" sizes="64x64" type="image/svg+xml" href="../../img/indigo_logo_solid.svg"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/laika-helium.js"></script>
    <script src="../../01-quickstart/hello-indigo.md.js"></script>
    <script src="../../01-quickstart/mdoc.js"></script>
    <script src="../../03-gameloop/frame-context.md.js"></script>
    <script src="../../03-gameloop/mdoc.js"></script>
    <script src="../../03-gameloop/outcome.md.js"></script>
    <script src="../../06-presentation/materials.md.js"></script>
    <script src="../../06-presentation/cameras.md.js"></script>
    <script src="../../06-presentation/lighting.md.js"></script>
    <script src="../../06-presentation/depth.md.js"></script>
    <script src="../../06-presentation/clones-and-mutants.md.js"></script>
    <script src="../../06-presentation/animation.md.js"></script>
    <script src="../../06-presentation/layers.md.js"></script>
    <script src="../../06-presentation/audio.md.js"></script>
    <script src="../../06-presentation/scene-update-fragment.md.js"></script>
    <script src="../../06-presentation/boundaries.md.js"></script>
    <script src="../../06-presentation/shapes.md.js"></script>
    <script src="../../06-presentation/text-and-fonts.md.js"></script>
    <script src="../../06-presentation/mdoc.js"></script>
    <script src="../../08-time/signals.md.js"></script>
    <script src="../../08-time/mdoc.js"></script>
    <script src="../../08-time/time-varying-values.md.js"></script>
    <script src="../../07-shaders/blending.md.js"></script>
    <script src="../../07-shaders/mdoc.js"></script>
    <script src="../../07-shaders/shaders-overview.md.js"></script>
    <script src="../../09-uicomponents/button.md.js"></script>
    <script src="../../09-uicomponents/input-field.md.js"></script>
    <script src="../../09-uicomponents/hit-area.md.js"></script>
    <script src="../../09-uicomponents/radio-button.md.js"></script>
    <script src="../../09-uicomponents/mdoc.js"></script>
    <script src="../../04-organisation/scene-management.md.js"></script>
    <script src="../../04-organisation/boot-and-start-up.md.js"></script>
    <script src="../../04-organisation/subsystems.md.js"></script>
    <script src="../../04-organisation/mdoc.js"></script>
    <script src="../../02-guides/mdoc.js"></script>
    <script src="../../02-guides/howto-fire-shader.md.js"></script>
    <script src="../../02-guides/howto-custom-entity.md.js"></script>
    <script src="../assets.md.js"></script>
    <script src="../logging.md.js"></script>
    <script src="../mdoc.js"></script>
    <script src="../input-handling.md.js"></script>
    <script src="../../10-information/key-concepts.md.js"></script>
    <script src="../../10-information/antipatterns.md.js"></script>
    <script src="../../10-information/mdoc.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../"><img src="../../img/indigo_logo_solid_text.svg" alt="Homepage" title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="/api">API</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../table-of-content/">Contents</a></li>
    <li class="level1 nav-header">Setup &amp; Configuration</li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/examples/">Examples, Demos, and References</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/extensions-and-libs/">Extensions, Libraries, and Related Projects</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/hello-indigo/">Hello, Indigo!</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/project-templates/">Mill &amp; SBT Templates</a></li>
    <li class="level2 nav-leaf"><a href="../../01-quickstart/quickstart/">Quick start</a></li>
    <li class="level1 nav-header">Guides</li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-custom-entity/">How to make a custom entity</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-fire-shader/">How to write a fire shader</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-hello-indigo-tyrian/">How to make a responsive UI using Tyrian</a></li>
    <li class="level2 nav-leaf"><a href="../../02-guides/howto-indigo-game/">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level1 nav-header">Gameloop</li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/events/">Events</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/frame-context/">Frame context</a></li>
    <li class="level2 nav-leaf"><a href="../../03-gameloop/outcome/">Outcome Type</a></li>
    <li class="level1 nav-header">Organisation</li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/boot-and-start-up/">Boot &amp; Start Up</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/game-entry-points/">Game Entry Points</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/scene-management/">What are Scenes?</a></li>
    <li class="level2 nav-leaf"><a href="../../04-organisation/subsystems/">What SubSystems are</a></li>
    <li class="level1 nav-header">Platform &amp; IO</li>
    <li class="level2 nav-leaf"><a href="../assets/">Assets &amp; Asset Loading</a></li>
    <li class="level2 nav-leaf"><a href="../configuration/">Game Configuration</a></li>
    <li class="level2 nav-leaf"><a href="../cross-platform-publishing/">Cross Platform Publishing</a></li>
    <li class="level2 nav-leaf"><a href="../importers/">File Importers</a></li>
    <li class="level2 active nav-leaf"><a href="#">Input Handling</a></li>
    <li class="level2 nav-leaf"><a href="../loading-and-saving-data/">Loading &amp; Saving Data</a></li>
    <li class="level2 nav-leaf"><a href="../logging/">Logging</a></li>
    <li class="level2 nav-leaf"><a href="../networking/">Networking</a></li>
    <li class="level1 nav-header">Presentation</li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/animation/">Animation</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/audio/">Audio</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/boundaries/">Boundaries</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/cameras/">Cameras</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/clones-and-mutants/">Clones &amp; Mutants</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/depth/">Depth</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/layers/">Layers</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/lighting/">Lighting</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/materials/">Materials</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/primitives/">Primitives &amp; Building Blocks</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/scene-update-fragment/">SceneUpdateFragment</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/shapes/">Shapes</a></li>
    <li class="level2 nav-leaf"><a href="../../06-presentation/text-and-fonts/">Text &amp; Fonts</a></li>
    <li class="level1 nav-header">Shaders</li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/blending/">Blending</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/constants/">Shader Constants, Variables, and Outputs</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/premultiplied-alpha/">Premultiplied Alpha</a></li>
    <li class="level2 nav-leaf"><a href="../../07-shaders/shaders-overview/">Shaders Overview</a></li>
    <li class="level1 nav-header">Time</li>
    <li class="level2 nav-leaf"><a href="../../08-time/gametime/">GameTime</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/signals/">Signals &amp; Signal Functions</a></li>
    <li class="level2 nav-leaf"><a href="../../08-time/time-varying-values/">Time Varying Values</a></li>
    <li class="level1 nav-header">UI Components</li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/button/">Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/hit-area/">Hit Areas</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/input-field/">Input Fields</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/radio-button/">Radio Buttons</a></li>
    <li class="level2 nav-leaf"><a href="../../09-uicomponents/ui-components/">UI Components</a></li>
    <li class="level1 nav-header">Misc</li>
    <li class="level2 nav-leaf"><a href="../../10-information/alternatives/">Alternatives to Indigo</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/antipatterns/">Anti-Patterns</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/glossary/">Glossary</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/key-concepts/">Key Concepts</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/model-viewmodel-view/">Model, ViewModel, &amp; View</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/motivation-and-constraints/">Motivation &amp; Constraints</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/performance/">Performance</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/prior-art/">Prior Art</a></li>
    <li class="level2 nav-leaf"><a href="../../10-information/rendering-technology/">Rendering Technology</a></li>
    <li class="level1 nav-header">Physics</li>
    <li class="level2 nav-leaf"><a href="../../11-physics/physics-overview/">Physics Overview</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Input Handling</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#inputevents-discrete-events"><code>InputEvent</code>s (Discrete events)</a></li>
    <li class="level1 nav-node"><a href="#inputstate-continuous-signals">InputState (Continuous signals)</a></li>
    <li class="level2 nav-leaf"><a href="#input-mapping">Input Mapping</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="input-handling" class="title">Input Handling</h1>
        <p>At the time of writing, Indigo understands three input device types: Mouse, Keyboard, and Gamepad.</p>
        <blockquote>A note on gamepad support: So far only PS4 gamepads have been tested. Sony made the excellent decision to make them plug and play! XBox and other controllers may work but no time was invested in testing them once it became apparent then they didn&#39;t work out of the box on non-windows machines. Pull requests, issue reporting, and funding are all welcome!</blockquote>
        <p>Input handling comes in two forms:</p>
        <ol class="arabic">
          <li>Discrete events</li>
          <li>Continuous signals (sampled)</li>
        </ol>
        
        <h2 id="inputevents-discrete-events" class="section"><a class="anchor-link left" href="#inputevents-discrete-events"><i class="icofont-laika link">&#xef71;</i></a><code>InputEvent</code>s (Discrete events)</h2>
        <p>A discrete event is something that happens at a point in time, and you are notified about it.</p>
        <p>There are input actions that are best represented as events, a mouse click for example, which happens quickly as a result of a mouse button passing quickly through the Up, Down, and Up states. The browser noticing the transition and letting you know that it&#39;s happened is very useful.</p>
        <p>Input events only (currently) cover Mouse and Keyboard events, <em>not gamepads</em>, and can be detected during the model or view model update functions as you would any other event.</p>
        <p>For more information, please see the <a href="../../03-gameloop/events/">events</a> page.</p>
        
        <h2 id="inputstate-continuous-signals" class="section"><a class="anchor-link left" href="#inputstate-continuous-signals"><i class="icofont-laika link">&#xef71;</i></a>InputState (Continuous signals)</h2>
        <p>There are other types of input that don&#39;t make as much sense as events.</p>
        <p>It is possible in Indigo to listen to every distinct mouse move event for example, but that is almost certainly not what you actually want to do. Most likely, what you really want is the cumulative position at the point that this frame is being processed.</p>
        <p>Indigo does this by sampling the input states of the mouse, keyboard and gamepad and allowing you to access it through the <a href="../../03-gameloop/frame-context/">frame context</a>.</p>
        <blockquote>Note that this is how gamepads are usually modeled and at the moment Indigo is no exception. Adding discrete events for specific button presses to emulate mouse-like behavior is under consideration.</blockquote>
        <p>To continue our example from above: If you wanted the current mouse position, rather than listening to all of the <code>Move</code> events and redundantly reprocessing your model many times per frame, you can simply access the position directly with:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">mousePosition</span><span> = </span><span class="identifier">context</span><span>.</span><span class="identifier">mouse</span><span>.</span><span class="identifier">position</span><span> </span><span class="comment">// returns a Point(x, y)</span></code></pre>
        <p>&lt;div id=&quot;mdoc-html-run1&quot; data-mdoc-js&gt;&lt;/div&gt;</p>
        
        <h3 id="input-mapping" class="section"><a class="anchor-link left" href="#input-mapping"><i class="icofont-laika link">&#xef71;</i></a>Input Mapping</h3>
        <p><code>InputState</code>s ability to tell you about continuous input signals from mice, keyboards and gamepads is great, but what if you need to capture combinations of events? It&#39;s surprisingly hard work!</p>
        <p>For this we have created the input mapper, which can be found inside the input state.</p>
        <p>Here is an example of a &quot;dot&quot; that can be moved up, down, left, right, <em>and</em> diagonally using combinations of the W, A, S, and D keys.</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*

</span><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Dot</span><span>(</span><span class="identifier">center</span><span>: </span><span class="type-name">Point</span><span>) {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">update</span><span>(</span><span class="identifier">timeDelta</span><span>: </span><span class="type-name">Seconds</span><span>, </span><span class="identifier">inputState</span><span>: </span><span class="type-name">InputState</span><span>): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">Dot</span><span>] = {
    </span><span class="keyword">val</span><span> </span><span class="identifier">inputForce</span><span> = </span><span class="identifier">inputState</span><span>.</span><span class="identifier">mapInputs</span><span>(</span><span class="type-name">Dot</span><span>.</span><span class="identifier">inputMapping</span><span>, </span><span class="type-name">Vector2</span><span>(</span><span class="number-literal">0</span><span>, </span><span class="number-literal">0</span><span>))
    </span><span class="keyword">val</span><span> </span><span class="identifier">nextCenter</span><span> = </span><span class="type-name">Point</span><span>(
      (</span><span class="identifier">center</span><span>.</span><span class="identifier">x</span><span> + </span><span class="identifier">math</span><span>.</span><span class="identifier">round</span><span>(</span><span class="identifier">inputForce</span><span>.</span><span class="identifier">x</span><span> * </span><span class="identifier">timeDelta</span><span>.</span><span class="identifier">toDouble</span><span>).</span><span class="identifier">toInt</span><span>),
      (</span><span class="identifier">center</span><span>.</span><span class="identifier">y</span><span> + </span><span class="identifier">math</span><span>.</span><span class="identifier">round</span><span>(</span><span class="identifier">inputForce</span><span>.</span><span class="identifier">y</span><span> * </span><span class="identifier">timeDelta</span><span>.</span><span class="identifier">toDouble</span><span>).</span><span class="identifier">toInt</span><span>)
    )
    </span><span class="type-name">Outcome</span><span>(</span><span class="keyword">this</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">center</span><span> = </span><span class="identifier">nextCenter</span><span>))
  }
}
</span><span class="keyword">object</span><span> </span><span class="type-name">Dot</span><span> {
  </span><span class="keyword">def</span><span> </span><span class="declaration-name">initial</span><span>(</span><span class="identifier">center</span><span>: </span><span class="type-name">Point</span><span>): </span><span class="type-name">Dot</span><span> =
    </span><span class="type-name">Dot</span><span>(</span><span class="identifier">center</span><span>)

  </span><span class="keyword">val</span><span> </span><span class="identifier">inputMapping</span><span>: </span><span class="type-name">InputMapping</span><span>[</span><span class="type-name">Vector2</span><span>] = {
    </span><span class="keyword">val</span><span> </span><span class="identifier">xSpeed</span><span> = </span><span class="number-literal">30.0d</span><span>
    </span><span class="keyword">val</span><span> </span><span class="identifier">ySpeed</span><span> = -</span><span class="number-literal">30.0d</span><span>
    </span><span class="type-name">InputMapping</span><span>(
      </span><span class="comment">// WASD keymap
</span><span>      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_W</span><span>, </span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_A</span><span>) -&gt; </span><span class="type-name">Vector2</span><span>(-</span><span class="identifier">xSpeed</span><span>, </span><span class="identifier">ySpeed</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_W</span><span>, </span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_S</span><span>) -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="number-literal">0.0d</span><span>, </span><span class="number-literal">0.0d</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_W</span><span>, </span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_D</span><span>) -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="identifier">xSpeed</span><span>, </span><span class="identifier">ySpeed</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_A</span><span>, </span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_S</span><span>) -&gt; </span><span class="type-name">Vector2</span><span>(-</span><span class="identifier">xSpeed</span><span>, -</span><span class="identifier">ySpeed</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_A</span><span>, </span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_D</span><span>) -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="number-literal">0.0d</span><span>, </span><span class="number-literal">0.0d</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_S</span><span>, </span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_D</span><span>) -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="identifier">xSpeed</span><span>, -</span><span class="identifier">ySpeed</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_W</span><span>)            -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="number-literal">0.0d</span><span>, </span><span class="identifier">ySpeed</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_A</span><span>)            -&gt; </span><span class="type-name">Vector2</span><span>(-</span><span class="identifier">xSpeed</span><span>, </span><span class="number-literal">0.0d</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_S</span><span>)            -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="number-literal">0.0d</span><span>, -</span><span class="identifier">ySpeed</span><span>),
      </span><span class="type-name">Combo</span><span>.</span><span class="identifier">withKeyInputs</span><span>(</span><span class="type-name">Key</span><span>.</span><span class="type-name">KEY_D</span><span>)            -&gt; </span><span class="type-name">Vector2</span><span>(</span><span class="identifier">xSpeed</span><span>, </span><span class="number-literal">0.0d</span><span>)
    )
  }
}</span></code></pre>
        <p>&lt;div id=&quot;mdoc-html-run2&quot; data-mdoc-js&gt;&lt;/div&gt;</p>
        <p><code>Combo</code> instances can also be combined using the <code>|+|</code> operator.
        &lt;script type=&quot;text/javascript&quot; src=&quot;input-handling.md.js&quot; defer&gt;&lt;/script&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;mdoc.js&quot; defer&gt;&lt;/script&gt;</p>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>